//>>built
define("dojo/_base/declare dojo/_base/lang dojo/query dojo/dom-class dojo/dom-construct jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dijit/form/Form jimu/dijit/CheckBox dijit/form/NumberTextBox dijit/form/ValidationTextBox".split(" "),function(m,f,h,k,l,n,p){return m([n,p],{baseClass:"jimu-widget-add-data-setting",maxRecordThreshold:1E5,postCreate:function(){this.inherited(arguments);var a=this;h(".default-scope",this.domNode).forEach(function(b){l.create("span",{"class":"opt-text"},b).appendChild(document.createTextNode(a.nls._default));
l.create("span",{"class":"opt-button",onclick:function(){a.setDefaultScope(b.getAttribute("data-scope"))}},b).appendChild(document.createTextNode(a.nls.makeDefault))})},startup:function(){this._started||(this.inherited(arguments),this.setConfig(this.config))},getConfig:function(){if(!this.settingsForm.validate())return!1;this.config||(this.config={});var a=function(a,b,g,c){var d=a[b];d||(d=a[b]={});d.allow=!!g.getValue();c&&(d.label=null,a=c.get("value"),"string"===typeof a&&0<f.trim(a).length&&
(d.label=f.trim(a)))};this.config.numPerPage=function(a,b,g,c){c=c.get("value");return"number"===typeof c&&!isNaN(c)&&(c=Math.floor(c),c>=b&&c<=g)?c:a}(30,1,100,this.numPerBageBox);this.config.scopeOptions||(this.config.scopeOptions={});delete this.config.scopeOptions.FromUrl;var b=this.config.scopeOptions;b.defaultScope=this.getDefaultScope();a(b,"MyContent",this.MyContentCheckBox,this.MyContentTextBox);a(b,"MyOrganization",this.MyOrganizationCheckBox,this.MyOrganizationTextBox);a(b,"ArcGISOnline",
this.ArcGISOnlineCheckBox,this.ArcGISOnlineTextBox);a(b,"Curated",this.CuratedCheckBox,this.CuratedTextBox);b.Curated.filter=function(a){a=a.get("value");return"string"===typeof a&&0<f.trim(a).length?f.trim(a):null}(this.CuratedFilterTextBox);a(this.config,"addFromUrl",this.addFromUrlCheckBox);a(this.config,"addFromFile",this.addFromFileCheckBox);this.config.addFromFile.maxRecordCount=1E3;return this.config},setConfig:function(a){this.config=a||{};var b=this;a=function(a,g,c,d,h){var e=a[g];e||(e=
a[g]={allow:!0},d&&(e.label=null));"boolean"!==typeof e.allow&&(e.allow=!0);c.setValue(e.allow);d&&"string"===typeof e.label&&(c=f.trim(e.label),0<c.length&&d.set("value",c));h&&a.defaultScope===g&&b.setDefaultScope(g)};this.numPerBageBox.set("value",30);(function(a,b,c,d,f){try{var e=Number(a);"number"!==typeof e||isNaN(e)||(e=Math.floor(e),e>=b&&e<=c&&d.set("value",e))}catch(q){console.warn(f),console.warn(q)}})(this.config.numPerPage,1,100,this.numPerBageBox,"Error setting config.numPerPage:");
this.config.scopeOptions||(this.config.scopeOptions={});var d=this.config.scopeOptions;this.setDefaultScope("MyOrganization");a(d,"MyContent",this.MyContentCheckBox,this.MyContentTextBox,!0);a(d,"MyOrganization",this.MyOrganizationCheckBox,this.MyOrganizationTextBox,!0);a(d,"ArcGISOnline",this.ArcGISOnlineCheckBox,this.ArcGISOnlineTextBox,!0);a(d,"Curated",this.CuratedCheckBox,this.CuratedTextBox,!0);(function(a,b){"string"===typeof a&&b.set("value",f.trim(a))})(d.Curated.filter,this.CuratedFilterTextBox);
a(this.config,"addFromUrl",this.addFromUrlCheckBox);a(this.config,"addFromFile",this.addFromFileCheckBox)},getDefaultScope:function(){var a="MyOrganization";h(".default-scope",this.domNode).forEach(function(b){k.contains(b,"sel")&&(a=b.getAttribute("data-scope"))});return a},setDefaultScope:function(a){h(".default-scope",this.domNode).forEach(function(b){b.getAttribute("data-scope")===a?k.add(b,"sel"):k.remove(b,"sel")})}})});