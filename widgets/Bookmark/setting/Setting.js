//>>built
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/on ../utils ./Layout ./Sync jimu/dijit/CheckBox".split(" "),function(d,e,f,g,h,b,k,l,c){return d([e,f],{baseClass:"jimu-widget-bookmark-setting",startup:function(){this.inherited(arguments);this.layout=new k({nls:this.nls,config:this.config},this.layoutContainer);this.layout.startup();"undefined"===typeof this.config.editable&&(this.config.editable=!1);this.isEditableCheckBox=new c({label:this.nls.editable},
this.isEditableNode);this.isEditableCheckBox.startup();this.own(h(this.isEditableCheckBox,"change",g.hitch(this,"_onEditableChange")));this.isSaveLayersCheckBox=new c({label:this.nls.savelayers,checked:!1},this.isSaveLayers);this.isSaveLayersCheckBox.startup();this.sync=new l({nls:this.nls,folderUrl:this.folderUrl,appConfig:this.appConfig,map:this.map,config:this.config},this.syncContainer);this.sync.startup();this.setConfig(this.config)},_onEditableChange:function(a){a?this.isSaveLayersCheckBox.setStatus(!0):
(this.isSaveLayersCheckBox.setValue(!1),this.isSaveLayersCheckBox.setStatus(!1))},setConfig:function(a){this.config=a;this.updateConfigs();this.layout.setConfig(this.config);this.isEditableCheckBox.setValue(a.editable);this.isSaveLayersCheckBox.setValue(a.isSaveLayerVisibility);this._onEditableChange(a.editable);this.sync.setConfig(this.config)},getConfig:function(){var a=this.sync.getConfig();this.config.syncMode=a.syncMode;this.config.layout=this.layout.getConfig();this.config.editable=this.isEditableCheckBox.checked;
this.config.isSaveLayerVisibility=this.isSaveLayersCheckBox.checked;this.config.bookmarks2D=b.stringifyBookmarks(a.bookmarks);this.completeUpdateConfig();return this.config},destroy:function(){this.layout&&this.layout.destroy&&this.layout.destroy();this.sync&&this.layout.destroy&&this.sync.destroy();this.inherited(arguments)},updateConfigs:function(){b.isConfigBefore5_3(this.config)&&b.setDefaultConfigForUpdate(this.config);b.updateBookmarks(this.config.bookmarks2D)},completeUpdateConfig:function(){b.completeUpdateConfig(this.config)}})});