//>>built
define("dojo/_base/declare dojo/_base/html dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/portalUtils dojo/_base/lang dojo/on dojo/Deferred jimu/dijit/RadioBtn".split(" "),function(f,d,g,h,k,b,c,l){return f([h,g],{baseClass:"jimu-widget-scalebar-setting",selectUnit:"",selectStyle:"",startup:function(){this.inherited(arguments);this.config.scalebar||(this.config.scalebar={});this.set("selectUnit","");this.set("selectStyle","");this.own(c(this.englishNode,"click",b.hitch(this,function(){this.set("selectUnit",
"english");this._selectItem("english")})));this.own(c(this.metricNode,"click",b.hitch(this,function(){this.set("selectUnit","metric");this._selectItem("metric")})));this.own(c(this.dualNode,"click",b.hitch(this,function(){this.set("selectUnit","dual");this._selectItem("dual");this.set("selectStyle","line");this._selectItem("line")})));this.own(c(this.lineNode,"click",b.hitch(this,function(){this.set("selectStyle","line");this._selectItem("line")})));this.own(c(this.rulerNode,"click",b.hitch(this,
function(){this.set("selectStyle","ruler");this._selectItem("ruler")})));this.watch("selectUnit",this._updateUnit);this.watch("selectStyle",this._updateStyle);this.setConfig(this.config)},_updateUnit:function(){var a=null,a=this.get("selectUnit");"metric"===a?(a=this.metricNode,d.setStyle(this.rulerNode,"display","inline-block")):"dual"===a?(a=this.dualNode,d.setStyle(this.rulerNode,"display","none")):(a=this.englishNode,d.setStyle(this.rulerNode,"display","inline-block"));a&&a.setChecked&&a.setChecked(!0)},
_updateStyle:function(){var a=null;(a="ruler"===this.get("selectStyle")?this.rulerNode:this.lineNode)&&a.setChecked&&a.setChecked(!0)},_processConfig:function(a){var e=new l;a.scalebarUnit&&a.scalebarStyle?e.resolve(a):k.getUnits(this.appConfig.portalUrl).then(b.hitch(this,function(b){a.scalebarUnit="english"===b?"english":"metric";e.resolve(a)}));return e.promise},setConfig:function(a){this.config=a;this._processConfig(a.scalebar).then(b.hitch(this,function(a){this.set("selectUnit",a.scalebarUnit);
this._selectItem(a.scalebarUnit);a=a.scalebarStyle||"line";this.set("selectStyle",a);this._selectItem(a)}))},getConfig:function(){this.config.scalebar.scalebarUnit=this.get("selectUnit");this.config.scalebar.scalebarStyle=this.get("selectStyle");return this.config},_selectItem:function(a){this[a]&&this[a].setChecked&&this[a].setChecked(!0)}})});