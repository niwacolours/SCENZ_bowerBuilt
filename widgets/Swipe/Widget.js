//>>built
require({cache:{"widgets/Swipe/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/html"],function(m,n,c,g){var e={defaultColor:"#dadada",handlerPosition:{top:null,bottom:null,left:null,right:null},_isNewAddedLayer:function(a,c){c=c.getLayerInfoArrayOfWebmap();for(var f=0,e=c.length;f<e;f++)if(c[f].id===a.id)return!1;return!0},zoomToCurrentLayer:function(a){var c=a.config.isZoom,f=a.layerInfosObj;a=a.getSelection();var e;a&&a[0]&&(e=a[0]);c&&e&&(c=f.getLayerInfoById(e))&&
c.zoomTo&&c.zoomTo()},shouldHideInfoWindow:function(a,c){if(!c.map.infoWindow.isShowing)return!1;var f=c.map.infoWindow.getSelectedFeature();return a&&n.some(a,function(a){var e=f&&f.getLayer&&f.getLayer(),k=c.layerInfosObj.getLayerInfoById(a.id),k=e&&k&&k.traversal(function(a){return a.id===e.id});return e===a||k},c)},getVisibleLayerInfos:function(a,c){a=a.getLayerInfoArray();if(c){for(var f=[],e=0,g=a.length;e<g;e++){var k=a[e];if(k.isShowInMap())f.push(k);else for(var q=0,m=c.length;q<m;q++)c[q]===
k.id&&f.push(k)}return f}return n.filter(a,function(a){return a.isShowInMap()})},isTherePreconfiguredLayer:function(a,c){if(c)return!0;if(a&&a.layerState){a=a.layerState;for(var f in a)if(a.hasOwnProperty(f)&&!0===a[f].selected)return!0}return!1},processColor:function(a){return a?new c(a):new c(e.defaultColor)},getScreenMiddle:function(a){var c=0,f=0;a&&(a.root?(a=g.getMarginBox(a.root),c=a.w/2,f=a.h/2):a.width&&a.height&&(c=a.width/2,f=a.height/2));return{left:c,top:f}},hideSelectorPopup:function(a){g.addClass(a,
"hide")},showSelectorPopup:function(a){g.removeClass(a,"hide")},hackToRefreshSwipe:function(a){setTimeout(m.hitch(a,function(){a.swipeDijit.swipe&&a.swipeDijit.swipe()}),200)},cleanHandlerPosition:function(){e.handlerPosition={top:null,bottom:null,left:null,right:null}},isCacheHandlerPosition:function(){return e.handlerPosition.top||e.handlerPosition.bottom||e.handlerPosition.left||e.handlerPosition.right?!0:!1},saveHandlerPosition:function(a){a&&(e.handlerPosition.top=a.top,e.handlerPosition.bottom=
a.bottom,e.handlerPosition.left=a.left,e.handlerPosition.right=a.right)},setHandlerPosition:function(a,c,f){c.style&&"scope"===c.style?(e.handlerPosition.top&&(a.top=e.handlerPosition.top-9),e.handlerPosition.bottom&&(a.bottom=e.handlerPosition.bottom),e.handlerPosition.left&&(a.left=e.handlerPosition.left-9),e.handlerPosition.right&&(a.right=e.handlerPosition.right)):c.invertPlacement?(e.handlerPosition.right&&(a.right=e.handlerPosition.right),e.handlerPosition.left&&(a.left=e.handlerPosition.left),
e.handlerPosition.bottom&&(a.bottom=e.handlerPosition.bottom),e.handlerPosition.top&&(a.top=e.handlerPosition.top)):(e.handlerPosition.right&&(a.left=e.handlerPosition.right),e.handlerPosition.left&&(a.right=e.handlerPosition.left),e.handlerPosition.bottom&&(a.top=e.handlerPosition.bottom),e.handlerPosition.top&&(a.bottom=e.handlerPosition.top));0>a.top&&(a.top=0);a.top>f.height&&(a.top=f.height);0>a.left&&(a.left=0);a.left>f.width&&(a.left=f.width)},getLayerNode:function(a){return a._heatmapManager&&
a._heatmapManager.imageLayer&&a._heatmapManager.imageLayer._div||a._div},getLayerTransform:function(a,c){var f=a.layer;a={dx:0,dy:0};if(f.getNavigationTransform)a=f.getNavigationTransform();else if(f._getTransform){if(c=f._getTransform())a.dx=c.dx,a.dy=c.dy}else(f=e.getLayerNode(f).style)&&"css-transforms"===c.map.navigationMode&&(f=c._getTransformValue(f))&&(c=c._parseTransformValue(f),a.dx=c.x,a.dy=c.y);return a}};return e})},"widgets/Swipe/MultSelector/MultSelector":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/query dojo/_base/html dojo/text!./MultSelector.html jimu/dijit/CheckBox dijit/form/Select dojox/form/CheckedMultiSelect dijit/form/ValidationTextBox xstyle/css!dojox/form/resources/CheckedMultiSelect.css".split(" "),
function(m,n,c,g,e,a,q,f,p,u){return n([g,e,a,m],{templateString:u,_LAST_VALUEL:"",postCreate:function(){this.inherited(arguments)},startup:function(){this.own(q(this.selector,"click",c.hitch(this,function(a){"INPUT"===a.target.nodeName&&this.selector.dropDownButton.toggleDropDown();a=f(".dijitReset.dijitMenuItemLabel",this.selector.dropDown.domNode);for(var c=0,e=a.length;c<e;c++){var k=a[c];p.attr(k,"title",k.innerText)}})));this.own(q(this.selector,"change",c.hitch(this,function(a){this._updateMultSelectorLabel(this._getOptionsLabelsByValues(a));
this._LAST_VALUEL.toString()!==a.toString()&&(this.selector.dropDownButton.toggleDropDown(),this.selector.dropDownButton.toggleDropDown(),this.emit("change",a),this._LAST_VALUEL=a)})));this.inherited(arguments)},initOptions:function(a,c){this.disable();this._initMultSelectorLabel();var f=null;c&&(f=this.selector.getOptions());this.selector.removeOption(this.selector.getOptions());for(var e=[],d=0,h=a.length;d<h;d++){var l=a[d];this.selector.addOption(l);this._hasOptionMultSelected(l,c?f:a)&&e.push(l.value)}this.selector.set("value",
e);this._updateMultSelectorLabel(this._getOptionsLabelsByValues(e));this.enable()},setOptions:function(a){this.selector.set("options",a)},getOptions:function(){return this.selector.get("options")},reset:function(){this.selector.set("options",[{value:"",label:""}]);this.selector.reset()},setValue:function(a){this.setConfig(a)},setConfig:function(a){this._setMultSelectorEmpty();this.selector.set("value",a)},getConfig:function(){return this.selector.getValue()},disable:function(){this.selector.set("disabled",
!0);this._DISABLED=!0},enable:function(){this.selector.set("disabled",!1);this._DISABLED=!1},_initMultSelectorLabel:function(){this.selector.labelDiv&&(p.empty(this.selector.labelDiv),p.destroy(this.selector.labelDiv),this.selector.labelDiv=null);var a=f(".dijitButtonText",this.selector.dropDownButton.buttonNode)[0];p.addClass(a,"hide");this.selector.labelDiv=p.create("div",{"class":"dijitReset dijitInline dijitButtonText multselector-label-container"},a,"after");p.addClass(this.selector.labelDiv,
"label-max-height");p.addClass(this.selector.dropDownMenu.domNode,"mult-selector-dropdown-max-height");this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_setMultSelectorEmpty:function(){this.selector.set("value",[]);this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_updateMultSelectorLabel:function(a){p.empty(this.selector.labelDiv);a&&0!==a.length||this._setMultSelectorEmpty();for(var c=0,f=a.length;c<f;c++)p.create("div",{"class":"dijitReset dijitButtonText multselector-label",
innerHTML:a[c]},this.selector.labelDiv)},_getOptionsLabelsByValues:function(a){for(var c=this.getOptions(),f=[],e=0,d=c.length;e<d;e++)for(var h=c[e],l=0,x=a.length;l<x;l++)h.value===a[l]&&f.push(h.label);return f},_hasOptionMultSelected:function(a,c){for(var f=0,e=c.length;f<e;f++){var d=c[f];if(d.value===a.value&&!0===d.selected)return!0}return!1}})})},"dojox/form/CheckedMultiSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/i18n dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/_FormSelectWidget dijit/form/ComboButton dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html dojo/text!dojox/form/resources/CheckedMultiSelect.html dojo/i18n!dojox/form/nls/CheckedMultiSelect dijit/form/CheckBox".split(" "),
function(m,n,c,g,e,a,q,f,p,u,k,r,w,v,d,h,l,x,y,z,b){var t=m("dojox.form._CheckedMultiSelectItem",[p,u,k],{templateString:y,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled||(this.disabled=this.option.disabled=this.option.disabled||!1);this.readOnly||(this.readOnly=this.option.readOnly=this.option.readOnly||!1);
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},_changeBox:function(){this.get("disabled")||this.get("readOnly")||(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(b){this.get("disabled")||this.get("readOnly")?g.stop(b):this.checkBox._onClick(b)},_updateBox:function(){this.checkBox.set("value",
this.option.selected)},_setDisabledAttr:function(b){this.disabled=b||this.option.disabled;this.checkBox.set("disabled",this.disabled);a.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(b){this.checkBox.set("readOnly",b);this.readOnly=b}}),A=m("dojox.form._CheckedMultiSelectMenu",w,{multiple:!1,buildRendering:function(){this.inherited(arguments);var b=this.menuTableNode=this.domNode,d=this.domNode=q.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});
b.parentNode&&b.parentNode.replaceChild(d,b);a.remove(b,"dijitMenuTable");d.className=b.className+" dojoxCheckedMultiSelectMenu";b.className="dijitReset dijitMenuTable";b.setAttribute("role","listbox");d.setAttribute("role","presentation");d.appendChild(b)},resize:function(b){b&&(e.setMarginBox(this.domNode,b),"w"in b&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments);this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(b,a){"undefined"==
typeof this.isShowingNow&&this._markActive();this.focusChild(b);if(b.disabled||b.readOnly)return!1;if(!this.multiple)this.onExecute();b.onClick(a)}}),B=m("dojox.form._CheckedMultiSelectMenuItem",v,{templateString:x,option:null,parent:null,iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;
this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(b){},_updateBox:function(){a.toggle(this.domNode,"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||a.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(b){this.disabled||this.readOnly||(this.parent.multiple?(this.option.selected=
!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(c.forEach(this.parent.getChildren(),function(b){b.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected)));this.inherited(arguments)}});return m("dojox.form.CheckedMultiSelect",h,{templateString:z,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],postMixInProperties:function(){this.inherited(arguments);
this._nlsResources=f.getLocalization("dojox.form","CheckedMultiSelect",this.lang);"$_unset_$"==this.invalidMessage&&(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var b=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=b?b:0].value}this.dropDown&&(a.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=new A({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,
onChange:n.hitch(this,"_updateSelection")}))},startup:function(){this.dropDown&&(this.dropDownButton=new l({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode));this.inherited(arguments)},_onMouseDown:function(b){b.preventDefault()},validator:function(){return this.required?c.some(this.getOptions(),function(b){return b.selected&&null!=b.value&&0!=b.value.toString().length}):!0},validate:function(b){d.hide(this.domNode);
(b=this.isValid(b))||this.displayMessage(this.invalidMessage);return b},isValid:function(b){return this.validator()},getErrorMessage:function(b){return this.invalidMessage},displayMessage:function(b){d.hide(this.domNode);b&&d.show(b,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(b,a){},_addOptionItem:function(b){var a;this.dropDown?(a=new B({option:b,parent:this.dropDownMenu}),this.dropDownMenu.addChild(a)):(a=new t({option:b,parent:this,disabled:this.disabled,readOnly:this.readOnly}),
this.wrapperDiv.appendChild(a.domNode));this.onAfterAddOptionItem(a,b)},_refreshState:function(){this.validate(this.focused)},onChange:function(b){this._refreshState()},reset:function(){this.inherited(arguments);d.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);c.forEach(this._getChildren(),function(b){b._updateBox()});q.empty(this.containerNode);var b=this;c.forEach(this.value,function(a){a=q.create("option",{value:a,label:a,selected:"selected"});
q.place(a,b.containerNode)});if(this.dropDown&&this.dropDownButton){var a=0,d="";c.forEach(this.options,function(b){b.selected&&(a++,d=b.label)});this.dropDownButton.set("label",this.multiple?n.replace(this._nlsResources.multiSelectLabelText,{num:a}):d)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():c.map(this.wrapperDiv.childNodes,function(b){return r.byNode(b)})},invertSelection:function(b){this.multiple&&(c.forEach(this.options,function(b){b.selected=!b.selected}),
this._updateSelection())},_setDisabledAttr:function(b){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",b);c.forEach(this._getChildren(),function(a){a&&a.set&&a.set("disabled",b)})},_setReadOnlyAttr:function(b){this.inherited(arguments);"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",b);this.readOnly=b;c.forEach(this._getChildren(),function(a){a&&a.set&&a.set("readOnly",b)})},uninitialize:function(){d.hide(this.domNode);c.forEach(this._getChildren(),
function(b){b.destroyRecursive()});this.inherited(arguments)}})})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(m,n,c,g,e,a,q,f,p,u,k,r,w,v,d,h){k("dijit-legacy-requires")&&h(0,function(){m(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return c("dijit.Menu",
d,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):n.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return w.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||
a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=g.byId(a,this.ownerDocument);var d;if("iframe"==a.tagName.toLowerCase()){var c=a;d=this._iframeContentWindow(c);d=r.body(d.document)}else d=a==r.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var h={node:a,iframe:c};e.set(a,"_dijitMenu"+this.id,this._bindings.push(h));var b=p.hitch(this,function(b){var a=this.selector,d=a?function(b){return u.selector(a,
b)}:function(b){return b},t=this;return[u(b,d(this.leftClickToOpen?"click":"contextmenu"),function(b){b.stopPropagation();b.preventDefault();(new Date).getTime()<t._lastKeyDown+500||t._scheduleOpen(this,c,{x:b.pageX,y:b.pageY},b.target)}),u(b,d("keydown"),function(b){if(93==b.keyCode||b.shiftKey&&b.keyCode==f.F10||t.leftClickToOpen&&b.keyCode==f.SPACE)b.stopPropagation(),b.preventDefault(),t._scheduleOpen(this,c,null,b.target),t._lastKeyDown=(new Date).getTime()})]});h.connects=d?b(d):[];c&&(h.onloadHandler=
p.hitch(this,function(){var a=this._iframeContentWindow(c),a=r.body(a.document);h.connects=b(a)}),c.addEventListener?c.addEventListener("load",h.onloadHandler,!1):c.attachEvent("onload",h.onloadHandler))},unBindDomNode:function(a){var d;try{d=g.byId(a,this.ownerDocument)}catch(t){return}a="_dijitMenu"+this.id;if(d&&e.has(d,a)){for(var c=e.get(d,a)-1,h=this._bindings[c],b;b=h.connects.pop();)b.remove();(b=h.iframe)&&(b.removeEventListener?b.removeEventListener("load",h.onloadHandler,!1):b.detachEvent("onload",
h.onloadHandler));e.remove(d,a);delete this._bindings[c]}},_scheduleOpen:function(a,d,c,h){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:h,delegatedTarget:a,iframe:d,coords:c})},1))},_openMyself:function(d){function c(){m.refocus&&p&&p.focus();v.close(m)}var h=d.target,f=d.iframe,b=d.coords,t=!b;this.currentTarget=d.delegatedTarget;if(b){if(f){d=a.position(f,!0);var h=this._iframeContentWindow(f),h=a.docScroll(h.document),e=q.getComputedStyle(f),
l=q.toPixelValue,n=(k("ie")&&k("quirks")?0:l(f,e.paddingLeft))+(k("ie")&&k("quirks")?l(f,e.borderLeftWidth):0),f=(k("ie")&&k("quirks")?0:l(f,e.paddingTop))+(k("ie")&&k("quirks")?l(f,e.borderTopWidth):0);b.x+=d.x+n-h.x;b.y+=d.y+f-h.y}}else b=a.position(h,!0),b.x+=10,b.y+=10;var m=this,f=this._focusManager.get("prevNode");d=this._focusManager.get("curNode");var p=!d||g.isDescendant(d,this.domNode)?f:d;v.open({popup:this,x:b.x,y:b.y,onExecute:c,onCancel:c,orient:this.isLeftToRight()?"L":"R"});this.focus();
t||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);v.close(this)}},destroy:function(){n.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),function(m,n,c,g,e,a,q,f,p){g("dijit-legacy-requires")&&
a(0,function(){m(["dijit/form/RadioButton"])});return n("dijit.form.CheckBox",[q,f],{templateString:p,baseClass:"dijitCheckBox",_setValueAttr:function(a,c){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",a,c)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&
e("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&e("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(m,n){return m("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(c){this._set("readOnly",c);n.set(this.focusNode,"readOnly",
c)},_setLabelAttr:void 0,_getSubmitValue:function(c){return null==c||""===c?"on":c},_setValueAttr:function(c){c=this._getSubmitValue(c);this._set("value",c);n.set(this.focusNode,"value",c)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));n.set(this.focusNode,"value",this.value)},_onClick:function(c){return this.readOnly?(c.stopPropagation(),c.preventDefault(),!1):this.inherited(arguments)}})})},"esri/dijit/LayerSwipe":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/has ../kernel dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/text!./templates/LayerSwipe.html dojo/i18n!../nls/jsapi dojo/dom-class dojo/dom-style dojo/dnd/move dojo/dnd/Mover dojo/sniff dojo/dom-geometry ../geometry/Point dojo/Deferred dojo/promise/all".split(" "),
function(m,n,c,g,e,a,q,f,p,u,k,r,w,v,d,h,l,x,y){var z=n([v],{onFirstMove:function(b){var a,d;d=this.node.style;var c=this.host;switch(d.position){case "relative":case "absolute":a=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;default:d.position="absolute",d=h.getMarginBox(this.node),a=d.l,d=d.t}this.marginBox.l=a-this.marginBox.l;this.marginBox.t=d-this.marginBox.t;c&&c.onFirstMove&&c.onFirstMove(this,b);this.events.shift().remove()}});m=n("esri.dijit.LayerSwipe",[a,q,
m],{templateString:p,options:{theme:"LayerSwipe",layers:[],enabled:!0,type:"vertical",invertPlacement:!1,clip:9},constructor:function(b,a){b=c.mixin({},this.options,b);this.domNode=a;this._i18n=u;this.set("map",b.map);this.set("layers",b.layers);this.set("top",b.top);this.set("left",b.left);this.set("theme",b.theme);this.set("enabled",b.enabled);this.set("type",b.type);this.set("clip",b.clip);this.set("invertPlacement",b.invertPlacement);this.watch("theme",this._updateThemeWatch);this.watch("enabled",
this._enabled);this.watch("type",this._type);this.watch("invertPlacement",this._invertPlacement);this._css={handleContainer:"handleContainer",handle:"handle"};this._listeners=[]},startup:function(){this.inherited(arguments);this.map||(this.destroy(),console.log("LayerSwipe::map required"));this.set("layers",this.layers);this.layers.length||(this.destroy(),console.log("LayerSwipe::layer required"));this._allLoaded().then(c.hitch(this,function(){this._init()}),function(b){console.log("LayerSwipe::"+
b.message)})},destroy:function(){this._removeEvents();this._unclipLayers();this.inherited(arguments)},swipe:function(){this._swipe()},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)},_allLoaded:function(){for(var b=[],a=0;a<this.layers.length;a++){"string"==typeof this.layers[a]&&(this.layers[a]=this.map.getLayer(this.layers[a]),this.layers[a]||console.log("LayerSwipe::Could not get layer by ID"));var d=new x;this.layers[a].loaded?d.resolve("layer loaded"):this._layerLoadedPromise(a,
d);b.push(d.promise)}var h=new x;return this.map.loaded?h.resolve("map loaded"):f.once(this.map,"load",c.hitch(this,function(){h.resolve("map loaded")})),b.push(h.promise),y(b)},_layerLoadedPromise:function(b,a){f.once(this.layers[b],"load",function(){a.resolve("layer loaded")})},_mb:function(){var b=h.getMarginBox(this.map.root);return{t:0,l:0,w:b.l+b.w,h:b.h+b.t}},_setInitialPosition:function(){var b,a,d,c,f,e,l;(b=0,a=0,c=h.getMarginBox(this._moveableNode),d=this.get("type"),f=this.get("top"),
e=this.get("left"),l=this.get("invertPlacement"),"scope"===d)?(a=void 0!==f?f:this.map.height/2-c.h/2,b=void 0!==e?e:this.map.width/2-c.w/2):"horizontal"===d?(a=this.map.height/4-c.h/2,a=void 0!==f?f:l?this.map.height-a:a):(b=this.map.width/4-c.w/2,b=void 0!==e?e:l?this.map.width-b:b);r.set(this._moveableNode,{top:a+"px",left:b+"px"})},_setSwipeType:function(){var b=this.get("moveable"),a=this.get("type");a&&(b&&b.destroy(),k.add(this._moveableNode,a),b=new w.parentConstrainedMoveable(this._moveableNode,
{area:"content",within:!0,handle:this._moveableNode,constraints:c.hitch(this,this._mb),mover:z}),this.set("moveable",b),this._setInitialPosition())},_init:function(){this._setSwipeType();this._setupEvents();this._enabled();this.set("loaded",!0);this.emit("load",{});this.swipe()},_removeEvents:function(){if(this._listeners&&this._listeners.length)for(var b=0;b<this._listeners.length;b++)this._listeners[b]&&this._listeners[b].remove();this._listeners=[]},_repositionMover:function(){var b=h.getMarginBox(this._moveableNode);
b&&(b.t>this.map.height||0>b.t||b.l>this.map.width||0>b.l)&&this._setInitialPosition()},_setupEvents:function(){this._removeEvents();this._mapResize=f.pausable(this.map,"resize",c.hitch(this,function(){this._repositionMover()}));this._listeners.push(this._mapResize);this._swipeMove=f.pausable(this.moveable,"Move",c.hitch(this,function(){this.swipe()}));this._listeners.push(this._swipeMove);this._swipePanEnd=f.pausable(this.map,"pan-end",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._swipePanEnd);
this._mapUpdateStart=f.pausable(this.map,"update-start",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._mapUpdateStart);this._mapUpdateEnd=f.pausable(this.map,"update-end",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._mapUpdateEnd);this._swipePan=f.pausable(this.map,"pan",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._swipePan);this._toolClick=f.pausable(this._moveableNode,"click",c.hitch(this,function(b){if("scope"===this.get("type")){b=
this._clickPosition(b);try{this.map.onClick(b,"other")}catch(t){console.log("LayerSwipe::scope click error")}this._clickCoords=null}}));this._listeners.push(this._toolClick);this._toolDblClick=f.pausable(this._moveableNode,"dblclick",c.hitch(this,function(b){if("scope"===this.get("type")){b=this._clickPosition(b);try{this.map.navigationManager.mouseEvents.onDblClick(b,"other")}catch(t){console.log("LayerSwipe::scope dblclick error")}this._clickCoords=null}}));this._listeners.push(this._toolDblClick);
this._evtCoords=f.pausable(this.moveable,"MouseDown",c.hitch(this,function(b){"scope"===this.get("type")&&(this._clickCoords={x:b.x,y:b.y})}));this._listeners.push(this._evtCoords)},_clickPosition:function(b){if(this._clickCoords&&this._clickCoords.x===b.x&&this._clickCoords.y===b.y){var a=h.position(this.map.root,!0),d=b.pageX-a.x,a=b.pageY-a.y;b.x=d;b.y=a;b.screenPoint={x:d,y:a};b.mapPoint=this.map.toMap(new l(d,a,this.map.spatialReference))}return b},_getLayerNode:function(b){return b._heatmapManager&&
b._heatmapManager.imageLayer&&b._heatmapManager.imageLayer._div||b._div},_positionValues:function(b){var a,d,c,f,e,l,g;b={layer:b,layerNode:this._getLayerNode(b),layerGraphics:b._heatmapManager?null:b.graphics,swipeType:this.get("type"),l:0,r:0,t:0,b:0};return f=this.get("clip"),g=this.get("invertPlacement"),d=h.getMarginBox(this._moveableNode),"vertical"!==b.swipeType&&"horizontal"!==b.swipeType||(b.layerNode&&(a=h.getMarginBox(b.layerNode),e=Math.abs(a.t),l=Math.abs(a.l)),c=h.getMarginBox(this.map.root)),
"vertical"===b.swipeType?(g?a&&0<a.l?(b.l=d.l-l,b.r=this.map.width-l):a&&0>a.l?(b.l=d.l+l,b.r=this.map.width+l):(b.l=d.l,b.r=this.map.width):a&&0<a.l?(b.l=0-l,b.r=d.l-l):a&&0>a.l?(b.l=0+l,b.r=d.l+l):(b.l=0,b.r=d.l),a&&0<a.t?(b.t=0-e,b.b=c.h-e):a&&0>a.t?(b.t=0+e,b.b=c.h+e):(b.t=0,b.b=c.h)):"horizontal"===b.swipeType?(g?a&&0<a.t?(b.t=d.t-e,b.b=this.map.height-e):a&&0>a.t?(b.t=d.t+e,b.b=this.map.height+e):(b.t=d.t,b.b=this.map.height):a&&0<a.t?(b.t=0-e,b.b=d.t-e):a&&0>a.t?(b.t=0+e,b.b=d.t+e):(b.t=0,
b.b=d.t),a&&0<a.l?(b.l=0-l,b.r=c.w-l):a&&0>a.l?(b.l=0+l,b.r=c.w+l):(b.l=0,b.r=c.w)):"scope"===b.swipeType&&(b.layerGraphics?(b.l=d.l,b.r=d.w,b.t=d.t,b.b=d.h,void 0!==f&&(b.l+=f,b.r+=-2*f,b.t+=f,b.b+=-2*f)):(b.l=d.l,b.r=b.l+d.w,b.t=d.t,b.b=b.t+d.h,void 0!==f&&(b.l+=f,b.r+=-f,b.t+=f,b.b+=-f))),b},_clipLayer:function(b){if(b.layerNode)if(b.layerGraphics){var a=b.layer.getNavigationTransform();a&&(a.hasOwnProperty("dx")&&(b.l+=-a.dx),a.hasOwnProperty("dy")&&(b.t+=-a.dy));b.layerNode.setClip({x:b.l,y:b.t,
width:b.r,height:b.b})}else{var c=b.layerNode.style;b&&c&&b.hasOwnProperty("r")&&b.hasOwnProperty("l")&&b.hasOwnProperty("t")&&b.hasOwnProperty("b")&&("css-transforms"===this.map.navigationMode?c&&(c=this._getTransformValue(c))&&(a=this._parseTransformValue(c),b.l-=a.x,b.r-=a.x,b.t-=a.y,b.b-=a.y):c&&"scope"===b.swipeType&&(a=this._parseScopeStyle(c),b.l-=a.x,b.r-=a.x,b.t-=a.y,b.b-=a.y),a=d("ie"),r.set(b.layerNode,"clip",a&&8>a?"rect("+b.t+"px "+b.r+"px "+b.b+"px "+b.l+"px)":"rect("+b.t+"px, "+b.r+
"px, "+b.b+"px, "+b.l+"px)"))}else console.log("LayerSwipe::Invalid layer type")},_swipe:function(){if(this.get("loaded")&&this.get("enabled")){var b={layers:[]};if(this.layers&&this.layers.length)for(var a=0;a<this.layers.length;a++){var d=this._positionValues(this.layers[a]);this._clipLayer(d);b.layers.push({layer:this.layers[a],left:d.l,right:d.r,top:d.t,bottom:d.b})}this.emit("swipe",b)}},_getTransformValue:function(b){var a,d;if(b){d=["transform","-webkit-transform","-ms-transform","-moz-transform",
"-o-transform"];for(var c=0;c<d.length&&!(a=b[d[c]]);c++){try{a=b.getPropertyValue(d[c])}catch(C){}if(a)break}}return a},_parseTransformValue:function(b){var a={x:0,y:0};-1!==b.toLowerCase().indexOf("translate3d")?b=b.replace("translate3d(","").replace(")","").replace(/px/gi,"").replace(/\s/i,"").split(","):-1!==b.toLowerCase().indexOf("translate")&&(b=b.replace("translate(","").replace(")","").replace(/px/gi,"").replace(/\s/i,"").split(","));try{a.x=parseFloat(b[0]),a.y=parseFloat(b[1])}catch(A){console.log("LayerSwipe::Error parsing transform number")}return a},
_parseScopeStyle:function(b){var a={x:0,y:0};try{a.x=parseFloat(b.left.replace(/px/gi,"").replace(/\s/i,"")),a.y=parseFloat(b.top.replace(/px/gi,"").replace(/\s/i,""))}catch(A){console.log("LayerSwipe::Error parsing div style float")}return a},_updateThemeWatch:function(b,a,d){k.remove(this.domNode,a);k.add(this.domNode,d)},_type:function(b,a){a&&k.remove(this._moveableNode,a);this._setSwipeType();this._setupEvents();this.swipe()},_pauseEvents:function(){if(this._listeners&&this._listeners.length)for(var b=
0;b<this._listeners.length;b++)this._listeners[b].pause()},_resumeEvents:function(){if(this._listeners&&this._listeners.length)for(var b=0;b<this._listeners.length;b++)this._listeners[b].resume()},_unclipLayers:function(){if(this.get("loaded")&&this.layers&&this.layers.length)for(var b=0;b<this.layers.length;b++){var a=this._getLayerNode(this.layers[b]),c=this.layers[b].graphics;a&&(c?(a.setClip&&a.setClip(null),r.set(a.rawNode||a,"clip","")):(c=d("ie"),r.set(a,"clip",c&&8>c?"rect(auto auto auto auto)":
"auto")))}},_invertPlacement:function(){this.swipe()},_enabled:function(){this.get("enabled")?(r.set(this.domNode,"display","block"),this._resumeEvents(),this.swipe()):(this._pauseEvents(),r.set(this.domNode,"display","none"),this._unclipLayers())}});return g("extend-esri")&&c.setObject("dijit.LayerSwipe",m,e),m})},"widgets/Swipe/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:widgets/Swipe/MultSelector/MultSelector.html":'\x3cdiv class\x3d"mult-selector"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dojox/form/CheckedMultiSelect" multiple\x3d"true" dropDown\x3d"true"\r\n\t\tdata-dojo-attach-point\x3d"selector"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dojox/form/resources/_CheckedMultiSelectMenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" dojoAttachPoint\x3d"focusNode" role\x3d"menuitemcheckbox" tabIndex\x3d"-1"\n\tdojoAttachEvent\x3d"ondijitclick:_onClick"\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\n\t\t\x3e\x3cdiv src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitMenuItemIcon ${_iconClass}" dojoAttachPoint\x3d"iconNode"\n\t\t\t\x3e\x3cinput class\x3d"dojoxCheckedMultiSelectCheckBoxInput" dojoAttachPoint\x3d"inputNode" type\x3d"${_type.type}"\n\t\t/\x3e\x3c/div\x3e\x3c/td\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" dojoAttachPoint\x3d"containerNode,labelNode"\x3e\x3c/td\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" dojoAttachPoint\x3d"accelKeyNode"\x3e\x3c/td\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26nbsp;\x3c/td\n\x3e\x3c/tr\x3e',
"url:dojox/form/resources/_CheckedMultiSelectItem.html":'\x3cdiv class\x3d"dijitReset ${baseClass}"\n\t\x3e\x3cinput class\x3d"${baseClass}Box" data-dojo-type\x3d"dijit.form.CheckBox" data-dojo-attach-point\x3d"checkBox" \n\t\tdata-dojo-attach-event\x3d"_onClick:_changeBox" type\x3d"${_type.type}" data-dojo-props\x3d\'disabled:${disabled}, readOnly:${readOnly}\' baseClass\x3d"${_type.baseClass}"\n\t/\x3e\x3cdiv class\x3d"dijitInline ${baseClass}Label" data-dojo-attach-point\x3d"labelNode" data-dojo-attach-event\x3d"onclick:_onClick"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:dojox/form/resources/CheckedMultiSelect.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}"\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"comboButtonNode"\n\t\x3e\x3c/div\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"selectNode" class\x3d"dijit dijitReset dijitInline ${baseClass}Wrapper" data-dojo-attach-event\x3d"onmousedown:_onMouseDown,onclick:focus"\n\t\t\x3e\x3cselect class\x3d"${baseClass}Select dojoxCheckedMultiSelectHidden" multiple\x3d"true" data-dojo-attach-point\x3d"containerNode,focusNode"\x3e\x3c/select\n\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"wrapperDiv"\x3e\x3c/div\n\t\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n',"url:esri/dijit/templates/LayerSwipe.html":'\x3cdiv class\x3d"${theme}" role\x3d"presentation"\x3e\n    \x3cdiv title\x3d"${_i18n.widgets.layerSwipe.title}" data-dojo-attach-point\x3d"_moveableNode"\x3e\n        \x3cdiv class\x3d"${_css.handleContainer}"\x3e\n            \x3cdiv class\x3d"${_css.handle}"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:widgets/Swipe/Widget.html":'\x3cdiv class\x3d"jimu-widget-swipe"\x3e\r\n\t\x3cdiv class\x3d"swipe-layer-menu" data-dojo-attach-point\x3d"swipeLayersMenu"\x3e\r\n\t\t\x3cdiv class\x3d"swipe-icon jimu-float-trailing" data-dojo-attach-point\x3d"swipeIcon"\x3e\r\n\t\t\t\x3cdiv class\x3d"swipe-icon-inner" data-dojo-attach-point\x3d"swipeImg"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"titles" data-dojo-attach-point\x3d"titlesNode "\x3e\r\n\t\t\t\x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"show-detail-icon" data-dojo-attach-point\x3d"showDetailIcon" title\x3d"${nls.hideList}"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"selectors" data-dojo-attach-point\x3d"selectorsContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"singleLayersContainer"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"singleSelectorContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"multLayersContainer" class\x3d"hide mult-layers-container"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"multSelectorContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerSwipe"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/css/style.css":'.mult-selector .dojoxCheckedMultiSelect{width: 100%;}.mult-selector .label-max-height{max-height: 84px; overflow-y: auto;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton{width: 100%; border: none !important; background-color: transparent !important; table-layout: fixed;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container{width: 100%; overflow-x: hidden;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container::-webkit-scrollbar{background:#000;} .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .dijitButtonContents .multselector-label-container .multselector-label{width: 100%; height: 26px; text-align: left !important; padding: 4px 10px; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed; overflow: hidden;}.jimu-rtl .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .dijitButtonContents .multselector-label-container .multselector-label{text-align: right !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton {width: 16px; background-color: transparent;}.mult-selector .dojoxCheckedMultiSelectHover .dijitDownArrowButtonHover,.mult-selector .dojoxCheckedMultiSelectButtonFocused .dijitArrowButton{background-color: transparent !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonContents {border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu.mult-selector-dropdown-max-height{max-height: 260px; overflow-y: auto;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable {background-color: transparent; table-layout: fixed;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem,.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem td{border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitReset .dijitMenuItemIconCell{width: 36px; padding: 0 10px; padding: 3px 10px; border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectSelectedOption{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectCheckBoxInput{display: none;} .claro .LaunchpadTheme .mult-selector .dijitDropDownButton .dijitArrowButtonInner:before,.claro .LaunchpadTheme .mult-selector .dijitArrowButton:before {content: "n"; display: none;}.claro .LaunchpadTheme .jimu-widget-swipe .mult-selector .dijitArrowButton {padding: 0;}.jimu-widget-swipe {border-radius: 5px; transition: all 0.6s;}.jimu-widget-swipe.hide,.jimu-widget-swipe .hide{display: none;}.jimu-widget-swipe.transparent{opacity: 0.5;}.jimu-widget-swipe .swipe-icon{width: 30px; height: 100%; padding: 5px; cursor: pointer;}.jimu-widget-swipe .swipe-icon .swipe-icon-inner{width: 20px; height: 20px; background-position: center; background-repeat: no-repeat; background-image: url("images/loading.gif");}.jimu-widget-swipe .swipe-icon.swipe-icon-loaded{width: 50px; height: 18px; padding: 0; display: none;}.jimu-widget-swipe .swipe-layer-menu{width: 315px; font-size: 14px; padding: 14px; z-index: 50; color: #fff; background: #474747;}.jimu-rtl .jimu-widget-swipe .swipe-layer-menu{right: 32px; left: auto;}.jimu-widget-swipe .swipe-layer-menu .hint{display: inline-block; font-weight: bold; width: 100%;}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon{width: 12px; height: 16px; background-position: center; background-repeat: no-repeat; background-image: url("images/up.svg");}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon:hover{background-image: url("images/up_hover.svg");}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon.fold{background-image: url("images/down.svg");}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon.fold:hover{background-image: url("images/down_hover.svg");}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect {color: #FFF; background-color:transparent !important; table-layout: fixed;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitInputField {padding: 1px 10px; overflow: hidden; width: 100%;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitInputField .dijitSelectLabel.dijitValidationTextBoxLabel{text-overflow: ellipsis; white-space: nowrap; overflow: hidden; text-align: initial; width: 100%;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelectHover,.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelectFocused {border-color:#b5bcc7;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitArrowButton{padding: 0; border: none; background-image: none;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitButtonContents {border-style: none; border-width: 0; background: transparent !important;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitArrowButton {border-style: none; border-width: 0; background: transparent; width: 16px !important;}.jimu-widget-swipe .titles{display: flex; justify-content: center; align-items: center;}.jimu-widget-swipe .selectors{padding-top: 10px;}.jimu-widget-swipe .mult-layers-container{border: 1px solid #b5bcc7; width: 287px;}.jimu-widget-swipe-popup{width: 287px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed;}.jimu-widget-swipe-popup::-webkit-scrollbar-thumb{-webkit-border-radius:4px; border-radius:4px; background:#666;}.jimu-widget-swipe-popup::-webkit-scrollbar{background:#000;} .jimu-widget-swipe-popup.dijitMenu .dijitMenuItemSelected{border: none; background-image: none; background: transparent;}.jimu-widget-swipe-popup.dijitMenu .dijitMenuItemSelected td {color: #FFF; background-color: transparent; background-image: none;}.jimu-widget-swipe-popup.dijitMenu .dijitReset {color: #FFF; width: 100%; background-color: transparent;}.jimu-widget-swipe-popup.dijitMenu.dojoxCheckedMultiSelectMenu,.jimu-widget-swipe-popup.dijitMenuTable.dijitSelectMenu {background: #2A2A2A; height: 100%; height: calc(100% + 4px); overflow: hidden auto !important;}.jimu-widget-swipe-popup.dijitMenu .dijitMenuItem td{border-width: 0; border: none; overflow-x: hidden; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed; padding: 4px;}.jimu-widget-swipe-popup.dijitMenu .dijitMenuItemHover td{background: #4A4A4A; color: #FFF;}',
"url:widgets/Swipe/config.json":'{\r\n\t"style": "vertical",\r\n\t"layerState": null,\r\n\t"layer": "",\r\n\t"isZoom": false,\r\n\t"handleColor": "",\r\n\t"layerMode": "",\r\n\t"defaultLayers": [],\r\n\t"invertPlacement": false\r\n}',"*now":function(m){m(['dojo/i18n!*preload*widgets/Swipe/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/html dojo/query dojo/on dojo/Deferred ./utils ./MultSelector/MultSelector jimu/BaseWidget jimu/LayerInfos/LayerInfos dijit/_WidgetsInTemplateMixin esri/dijit/LayerSwipe dijit/form/Select".split(" "),function(m,n,c,g,e,a,q,f,p,u,k,r,w,v){return m([u,r],{baseClass:"jimu-widget-swipe",swipeDijit:null,layerInfosObj:null,_loadDef:null,_obtainedLabelLayers:[],_LAST_SELECTED:null,getSwipeModeByConfig:function(){this._SWIPE_MODE="";this.config.layerMode&&
"mult"===this.config.layerMode?(this._SWIPE_MODE="mult",g.addClass(this.singleLayersContainer,"hide"),g.removeClass(this.multLayersContainer,"hide")):(this._SWIPE_MODE="single",g.removeClass(this.singleLayersContainer,"hide"),g.addClass(this.multLayersContainer,"hide"));return this._SWIPE_MODE},createSelector:function(){"mult"===this._SWIPE_MODE?(this.multLayersSelector=new p({nls:this.nls},this.multSelectorContainer),this.multLayersSelector.startup(),this.own(a(this.multLayersSelector,"change",c.hitch(this,
this.onSwipeLayersChange)))):(this.singleSelector=new v({style:"width:100%"},this.singleSelectorContainer),this.own(a(this.singleSelector,"Change",c.hitch(this,this.onSwipeLayersChange))),this.own(a(this.singleSelector,"Click",c.hitch(this,this.onSwipeLayersClick))),this.own(a(this.singleSelector.dropDown.domNode,"mouseenter",c.hitch(this,this.onDropMouseEnter))),this.own(a(this.singleSelector.dropDown.domNode,"mouseleave",c.hitch(this,this.onDropMouseLeave))),this.own(a(this.swipeLayersMenu,"mouseleave",
c.hitch(this,this.onMenuMouseLeave))))},setDefaultOptions:function(a,h){var d=[];if(this.config.layerState){if(f.isTherePreconfiguredLayer(this.config)){var e=this.config.layerState,g;for(g in e)if(e.hasOwnProperty(g)&&!0===e[g].selected){var k=this.layerInfosObj.getLayerInfoById(g);k&&k.isShowInMap()&&d.push({value:g,label:k.title})}}e=0;for(g=a.length;e<g;e++)k=a[e],f._isNewAddedLayer(k,this.layerInfosObj)&&k.isShowInMap()&&d.push({value:k.id,label:k.title})}else d=n.map(a,c.hitch(this,function(b){return{label:b.title,
value:b.id}}));var b;a=0;for(e=d.length;a<e;a++)if(g=d[a],this._LAST_SELECTED&&this._LAST_SELECTED.mode===this.config.layerMode)for(var k=0,m=this._LAST_SELECTED.selected.length;k<m;k++)g.value===this._LAST_SELECTED.selected[k]&&(g.selected=!0,b=g.value);else this._isDefaultSelectedOption(g)&&(g.selected=!0,b=g.value);h&&"mult"!==this._SWIPE_MODE&&(b=this.singleSelector.get("value"));"mult"===this._SWIPE_MODE?this.multLayersSelector.initOptions(d,h):this.singleSelector.set("options",d);this.disableSelectors();
h=this.getSelection();"mult"===this._SWIPE_MODE?h&&h.length&&0===h.length&&(b=this.multLayersSelector.getOptions())&&"undefined"!==b.length&&0<b.length&&b[0].value&&this.multLayersSelector.setValue(b[0].value):b?this.singleSelector.set("value",b):h&&h.length&&1===h.length&&this.singleSelector.options&&"undefined"!==this.singleSelector.options.length&&0<this.singleSelector.options.length&&this.singleSelector.options[0].value?this.singleSelector.set("value",this.singleSelector.options[0].value):this.singleSelector.set("value",
null);this._LAST_SELECTED={mode:this._SWIPE_MODE,selected:this.getSelection()};this.enableSelectors();this.toggleSelectorPopup()},_isSwipeBaseMap:function(){var a=this.getSelection();if(a&&a.length)for(var c=0,f=a.length;c<f;c++){var e=this.layerInfosObj.getLayerInfoById(a[c]);if(e&&e.isShowInMap())return!1}return!0},_isDefaultSelectedOption:function(a){var d=[];"mult"===this._SWIPE_MODE?d=this.config.defaultLayers:d.push(this.config.layer);for(var c=0,f=d.length;c<f;c++)if(d[c]===a.value)return!0;
return!1},toggleSelectorPopup:function(){f.showSelectorPopup(this.domNode);var a=this.getOptions();a&&("mult"===this._SWIPE_MODE?0===a.length&&f.hideSelectorPopup(this.domNode):0!==a.length&&1!==a.length||f.hideSelectorPopup(this.domNode))},disableSelectors:function(){"mult"===this._SWIPE_MODE?this.multLayersSelector.disable():this.singleSelector.set("disabled",!0)},enableSelectors:function(){"mult"===this._SWIPE_MODE?this.multLayersSelector.enable():this.singleSelector.set("disabled",!1)},getSelection:function(){var a=
[];"mult"===this._SWIPE_MODE?a=this.multLayersSelector.getConfig():a.push(this.singleSelector.get("value"));return a},isSelected:function(a,c){c||(c=this.getSelection());for(var d=0,f=c.length;d<f;d++)if(a===c[d])return!0;return!1},getOptions:function(){var a=[];return a="mult"===this._SWIPE_MODE?this.multLayersSelector.getOptions():this.singleSelector.getOptions()},setSelection:function(){},onSelectorChange:function(){},_removeSingleSelectorOption:function(a){this.singleSelector.removeOption(a);
0===this.singleSelector.getOptions().length&&(this.singleSelector.set("options",[{value:"",label:""}]),this.singleSelector.reset())},postCreate:function(){this.inherited(arguments);this.config.style||(this.config.style="vertical");this.config.defaultLayers||(this.config.defaultLayers=[]);f.cleanHandlerPosition();this.getSwipeModeByConfig();this.createSelector();this.own(a(this.map,"layer-add",c.hitch(this,this._onMainMapBasemapChange)));this.own(a(this.showDetailIcon,"click",c.hitch(this,this._onShowDetailIconClick)))},
_enableSwipe:function(){this._obtainedLabelLayers&&this._obtainedLabelLayers.length&&0<this._obtainedLabelLayers.length&&(this._obtainedLabelLayers=[]);this.swipeDijit.enable()},_disableSwipe:function(){this.swipeDijit&&this.swipeDijit.disable&&(this.swipeDijit.disable(),n.forEach(this._obtainedLabelLayers,c.hitch(this,function(a){a.restoreLabelControl()})))},onOpen:function(){!0!==this._isTestSizeFlag&&this._loadLayerInfos().then(c.hitch(this,function(){var a=f.getVisibleLayerInfos(this.layerInfosObj);
this.setDefaultOptions(a);this.createSwipeDijit()}))},onClose:function(){!0!==this._isTestSizeFlag&&(this._LAST_SELECTED={mode:this._SWIPE_MODE,selected:this.getSelection()},this._loadDef.isResolved()?this._disableSwipe():this._loadDef.isFulfilled()||this._loadDef.cancel())},createSwipeDijit:function(){this.destroySwipeDijit();var a=[],e=this.getSelection();if(0===e.length)a=this._getLayerParams(null);else if("mult"===this._SWIPE_MODE)for(var l=0,k=e.length;l<k;l++)a=a.concat(this._getLayerParams(e[l]));
else a=this._getLayerParams(e[0]);e={type:this.config.style||"vertical",map:this.map,layers:a,invertPlacement:this.config.invertPlacement};f.isCacheHandlerPosition()?f.setHandlerPosition(e,this.config,this.map):(l=f.getScreenMiddle(this.map),e.top=l.top,e.left=l.left,"scope"===this.config.style&&(e.top-=130,e.left-=130));this.swipeDijit=new w(e,this.layerSwipe);this.swipeDijit.startup();this._setHandleColor();this._enableSwipe();g.place(this.swipeDijit.domNode,this.map.root,"before");this._autoHideInfoWindow(a);
this.swipeDijit.on("swipe",c.hitch(this,function(a){var d=n.map(a.layers,function(a){return a.layer});if(a&&a.layers[0]){var b=f.getLayerNode(a.layers[0].layer);this.config.invertPlacement?(b=f.getLayerTransform(a.layers[0],this.swipeDijit),a.layers[0].left+=b.dx,a.layers[0].top+=b.dy):b&&b.style&&"css-transforms"===this.map.navigationMode&&(a.layers[0].right-=a.layers[0].left,a.layers[0].left=0,a.layers[0].bottom-=a.layers[0].top,a.layers[0].top=0)}f.saveHandlerPosition(a.layers[0]);this._autoHideInfoWindow(d)}));
f.hackToRefreshSwipe(this);this._initPopupStyle()},_getLayerParams:function(a){var d=[];this._isSwipeBaseMap()?(a=this.layerInfosObj.getBasemapLayers(),n.forEach(a,c.hitch(this,function(a){d.push(this.map.getLayer(a.id))}))):(a=this.layerInfosObj.getLayerInfoById(a))&&a.traversal?a.traversal(c.hitch(this,function(a){var c=this.map.getLayer(a.id);c&&(d.push(c),this._obtainLabelControl(a,d))})):(a=this.layerInfosObj.getBasemapLayers(),n.forEach(a,c.hitch(this,function(a){d.push(this.map.getLayer(a.id))})));
return d},destroySwipeDijit:function(){if(this.swipeDijit&&this.swipeDijit.destroy){try{this.swipeDijit.destroy()}catch(d){console.log(d)}this.swipeDijit=null;this._restoreAllLabelControl();this.layerSwipe=g.create("div",{},this.swipeLayersMenu,"after")}},onSwipeLayersChange:function(){this.swipeDijit&&("mult"===this._SWIPE_MODE?this.createSwipeDijit():(this.createSwipeDijit(),f.zoomToCurrentLayer(this)),this.toggleSelectorPopup(),this.initSwipeLayersUi())},onLayerInfosIsShowInMapChanged:function(){if(this.swipeDijit&&
this.swipeDijit.enabled){var a=this.getSelection();if("mult"!==this._SWIPE_MODE){if(a&&a[0]&&""!==a[0]){var a=a[0],c=this.layerInfosObj.getLayerInfoById(a);c&&!c.isShowInMap()&&this._removeSingleSelectorOption(a)}a=this.getSelection()}a=f.getVisibleLayerInfos(this.layerInfosObj,a);this.setDefaultOptions(a,!0)}},_onMainMapBasemapChange:function(a){a.layer&&a.layer._basemapGalleryLayerType&&(a=this.getOptions(),a&&0<a.length||!this._loadDef.isResolved()||(a=f.getVisibleLayerInfos(this.layerInfosObj),
this.setDefaultOptions(a),this.createSwipeDijit()))},onLayerInfosChanged:function(a,c,e){if(this.swipeDijit&&this.swipeDijit.enabled){var d=this.getSelection();a=f.getVisibleLayerInfos(this.layerInfosObj);var h=!1;d&&d[0]&&(h=!0);"added"===c?(c=e.id,this._LAST_SELECTED.selected=[],this._LAST_SELECTED.selected.push(c),this.setDefaultOptions(a,!0),!1===h&&("mult"!==this._SWIPE_MODE?this.singleSelector.set("value",c):this.multLayersSelector.setValue(c))):"removed"===c&&(c=e.id,e=this.isSelected(c),a=
f.getVisibleLayerInfos(this.layerInfosObj),e?(this._LAST_SELECTED=null,"mult"!==this._SWIPE_MODE?(this._removeSingleSelectorOption(c),this.setDefaultOptions(a),this.createSwipeDijit()):this.setDefaultOptions(a)):"mult"!==this._SWIPE_MODE?this._removeSingleSelectorOption(c):this.setDefaultOptions(a))}},destroy:function(){this.destroySwipeDijit();this.inherited(arguments)},_loadLayerInfos:function(){var d=new q;this._loadDef=d;this._loadDef.isResolved()?d.resolve():k.getInstance(this.map,this.map.itemInfo).then(c.hitch(this,
function(e){d.isCanceled()||(this.layerInfosObj=e,this.own(a(e,"layerInfosChanged",c.hitch(this,this.onLayerInfosChanged))),this.own(a(e,"layerInfosIsShowInMapChanged",c.hitch(this,this.onLayerInfosIsShowInMapChanged))),this._setHintStr(),g.addClass(this.swipeIcon,"swipe-icon-loaded"),d.resolve())}));return d},_autoHideInfoWindow:function(a){f.shouldHideInfoWindow(a,this)&&this.map.infoWindow.hide()},_obtainLabelControl:function(a,c){var d=a.obtainLabelControl();d&&(c.push(d),this._obtainedLabelLayers.push(a))},
_restoreAllLabelControl:function(){n.forEach(this._obtainedLabelLayers,c.hitch(this,function(a){a.restoreLabelControl()}));this._obtainedLabelLayers=[]},_setHandleColor:function(){if(this.swipeDijit&&"scope"!==this.config.style){var a=this.swipeDijit.moveable.node,c=e(".handleContainer",this.esriTimeSlider)[0],l=e(".handle",c)[0];a&&g.setStyle(a,"backgroundColor",f.processColor(this.config.handleColor).toHex());c&&g.setStyle(c,"backgroundColor",f.processColor(this.config.handleColor).toHex());l&&
g.setStyle(l,"backgroundColor",f.processColor(this.config.handleColor).toHex())}},_getSelectorDom:function(){return"mult"===this._SWIPE_MODE?e(".dojoxCheckedMultiSelect\x3etable",this.multLayersSelector.domNode)[0]:this.singleSelector.domNode},initSwipeLayersUi:function(){var a=this._getSelectorDom(),c=g.getMarginBox(a);350<c.w+28?g.setStyle(this.domNode,"maxWidth",c.w+28+"px"):g.setStyle(this.domNode,"maxWidth","");if("mult"===this._SWIPE_MODE)for(var a=e(".multselector-label",a),c=0,f=a.length;c<
f;c++){var k=a[c];g.attr(k,"title",k.innerText)}else a=e(".dijitSelectLabel.dijitValidationTextBoxLabel",a)[0],g.attr(a,"title",a.innerText)},onDropMouseEnter:function(){this._mouseOnDropDown=!0},onDropMouseLeave:function(){this._mouseOnDropDown=!1;this.singleSelector.dropDown.onCancel()},onMenuMouseLeave:function(){setTimeout(c.hitch(this,function(){if(!this._mouseOnDropDown)this.singleSelector.dropDown.onCancel()}),10)},onSwipeLayersClick:function(){for(var a=e(".dijitReset.dijitMenuItemLabel",
this.singleSelector.dropDown.domNode),c=0,f=a.length;c<f;c++){var k=a[c];g.attr(k,"title",k.innerText)}},_initPopupStyle:function(){"mult"===this._SWIPE_MODE?g.addClass(this.multLayersSelector.selector.dropDownMenu.domNode,"jimu-widget-swipe-popup"):g.addClass(this.singleSelector.dropDown.domNode,"jimu-widget-swipe-popup")},_onShowDetailIconClick:function(){g.toggleClass(this.showDetailIcon,"fold");g.hasClass(this.showDetailIcon,"fold")?(g.addClass(this.selectorsContainer,"hide"),g.setAttr(this.showDetailIcon,
"title",this.nls.showList),g.addClass(this.domNode,"transparent")):(g.removeClass(this.selectorsContainer,"hide"),g.setAttr(this.showDetailIcon,"title",this.nls.hideList),g.removeClass(this.domNode,"transparent"));this._setHintStr()},_setHintStr:function(){if(g.hasClass(this.showDetailIcon,"fold")){var a=0,a="mult"===this._SWIPE_MODE?this.multLayersSelector.getConfig().length:""===this.singleSelector.getValue()?0:1;this.hintNode.innerHTML=a+" "+this.nls.nItemsSelected}else this.hintNode.innerHTML=
"scope"===this.config.style?this.nls.spyglassText:this.nls.swipeText}})});