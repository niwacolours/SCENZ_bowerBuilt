//>>built
require({cache:{"jimu/SpatialReference/srUtils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/promise/all dojo/request esri/SpatialReference ./unitUtils".split(" "),function(m,d,p,w,q,v,r,n){var f=null,l=null,g=!1,e=m(null,function(){});m=require.toUrl("jimu");var x=v(m+"/SpatialReference/cs.json",{handleAs:"json"}),y=v(m+"/SpatialReference/transform.json",{handleAs:"json"});e.loadResource=function(){var a=new w;if(f&&l)return a.resolve(),a;q([x,y]).then(function(d){f=
d[0];l=d[1];g=!0;a.resolve()},function(d){console.error(d);g=!1;a.reject(d)});return a};e.getAllCSUnits=function(){if(g){var a=[];p.forEach(f.wkids,d.hitch(this,function(d){d=this.getCSUnit(d);-1===p.indexOf(a,d)&&a.push(d)}));return a}};e.convertUnit=function(a,d,f){if(g)return n.convertUnit(a,d,f)};e.getUnitRate=function(a,d){if(g)return n.getUnitRate(a,d)};e.isProjectUnit=function(a){if(g)return n.isProjectUnit(a)};e.isGeographicUnit=function(a){if(g)return n.isGeographicUnit(a)};e.getGeographicUnits=
function(){if(g)return n.getGeographicUnits()};e.getProjectUnits=function(){if(g)return n.getProjectUnits()};e.getCSUnit=function(a){if(g)return a=p.indexOf(f.wkids,a),f.units[a]};e.isSameSR=function(a,d){if(g)return a=this.indexOfWkid(a),d=this.indexOfWkid(d),f.labels[a]===f.labels[d]};e.isValidWkid=function(a){if(g)return-1<this.indexOfWkid(a)};e.getSRLabel=function(a){if(g&&this.isValidWkid(a))return a=this.indexOfWkid(a),f.labels[a]};e.indexOfWkid=function(a){if(g)return p.indexOf(f.wkids,a)};
e.isWebMercator=function(a){return r.prototype._isWebMercator?r.prototype._isWebMercator.apply({wkid:parseInt(a,10)},[]):(new r(parseInt(a,10))).isWebMercator()};e.standardizeWkid=function(a){return this.isWebMercator(a)?3857:parseInt(a,10)};e.isValidTfWkid=function(a){if(g)return-1<this.indexOfTfWkid(a)};e.getTransformationLabel=function(a){if(g)return this.isValidTfWkid(a)?(a=this.indexOfTfWkid(a),l.labels[a]):""};e.indexOfTfWkid=function(a){if(g)return p.indexOf(l.tfWkids,a)};e.isGeographicCS=
function(a){if(g)return this.isValidWkid(a)?(a=this.indexOfWkid(a),!f.projSR[a]):!1};e.isProjectedCS=function(a){if(g)return this.isValidWkid(a)?(a=this.indexOfWkid(a),f.projSR[a]):!1};e.getGeoCSByProj=function(a){if(g&&this.isProjectedCS(a))return a=this.indexOfWkid(a),f.spheroids[a]};e.getSpheroidStr=function(a){if(g)return this.isGeographicCS(a)?f.labels[this.indexOfWkid(a)]:this.isProjectedCS(a)?(a=e.getGeoCSByProj(a),f.labels[this.indexOfWkid(a)]):null};e.isSameSpheroid=function(a,d){if(g)return a=
this.getSpheroidStr(a),d=this.getSpheroidStr(d),a&&d&&a===d?!0:!1};return e})},"widgets/Coordinate/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:widgets/Coordinate/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"coordinateBackground"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"coordinateMenuContainer" style\x3d"display:none"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"coordinateMenu"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"coordinateInfoMenu" class\x3d"coordinate-info-menu jimu-float-leading jimu-align-leading"\x3e\r\n      \x3cdiv class\x3d"jimu-float-leading coordinate-locate-container" data-dojo-attach-point\x3d"locateContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"locateButton" class\x3d"coordinate-locate jimu-float-leading"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"coordinateInfo" class\x3d"coordinate-info jimu-float-leading jimu-align-leading"\x3e\r\n        ${nls.loading}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"jimu-float-trailing coordinate-foldable-container" data-dojo-attach-point\x3d"foldContainer"\x3e\r\n      \x3cdiv class\x3d"coordinate-foldable jimu-float-trailing" data-dojo-attach-point\x3d"foldableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Coordinate/css/style.css":".jimu-widget-coordinate .coordinate-background{line-height: 17px; overflow: hidden; font-size: 10px; color: #fff; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.5);}.jimu-widget-coordinate .display-coordinate-menu{display: block !important; border-bottom: 1px solid rgba(255,255,255,0.4);}.jimu-widget-coordinate .coordinate-locate{width: 17px; height: 17px; background: url(images/locate.png) center no-repeat;}.jimu-widget-coordinate .coordinate-locate-container{width: 17px; height: 17px; border-right: 1px solid rgba(255,255,255,0.4);}.jimu-widget-coordinate .coordinate-locate-container:hover .coordinate-locate{background: url(images/locate-hover.png) center no-repeat !important; cursor: pointer;}.jimu-widget-coordinate .coordinate-locate-container-active .coordinate-locate{background: url(images/locate-active.png) center no-repeat !important; cursor: pointer;}.jimu-widget-coordinate .coordinate-info{margin: 0 5px; font-size: 11px !important; color: #fff !important;}.jimu-widget-coordinate .coordinate-info-menu-empty .coordinate-info{margin: 0;}.jimu-widget-coordinate .coordinate-info-menu-empty .coordinate-locate-container {border-style: none !important;}.jimu-widget-coordinate .coordinate-foldable-container {border-left: 1px solid rgba(255,255,255,0.4); height: 17px;}.jimu-widget-coordinate .coordinate-foldable{background: url(images/more.png) center no-repeat; cursor: pointer; width: 17px; height: 15px; margin: 1px 0;}.jimu-widget-coordinate:hover .coordinate-foldable{background-image: url(images/more-hover.png);}.jimu-rtl .jimu-widget-coordinate .coordinate-locate-container{border-right-style: none; border-left: 1px solid rgba(255,255,255,0.4);}.jimu-rtl .jimu-widget-coordinate .coordinate-locate-container:hover .coordinate-locate,.jimu-rtl .jimu-widget-coordinate .coordinate-locate-container-active .coordinate-locate{background-position: right center;}.jimu-rtl .jimu-widget-coordinate .coordinate-foldable-container{border-left-style: none; border-right: 1px solid rgba(255,255,255,0.4);}.claro .jimu-widget-coordinate .dijitMenuTable {background: transparent; border-style: none;}.claro .jimu-widget-coordinate .dijitMenuItem {color: #fff;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItem td{border-style: none; text-align: left; padding: 4px 2px;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItem.selected-item{font-weight: bold; background: #000;}.jimu-rtl .claro .jimu-widget-coordinate .dijitMenu .dijitMenuItem td{text-align: right;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemHover td,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemHover {color: #fff; background: #000; border-style: none;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemActive,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemActive td,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemSelected,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemSelected td{background: #000; color: #fff;}.DartTheme .jimu-widget-coordinate {z-index: 102 !important;}",
"url:widgets/Coordinate/config.json":'{\r\n  "spatialReferences": [],\r\n  "decimalPlaces": 3,\r\n  "addSeparator": true,\r\n  "displayOrderLonLat": true\r\n}',"*now":function(m){m(['dojo/i18n!*preload*widgets/Coordinate/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/html dijit/_WidgetsInTemplateMixin esri/geometry/Point esri/SpatialReference jimu/BaseWidget jimu/utils jimu/dijit/Message dojo/_base/lang dojo/on dojo/dom-class dijit/DropDownMenu dijit/MenuItem dojo/aspect dojo/Deferred esri/request esri/graphic esri/layers/GraphicsLayer esri/tasks/ProjectParameters esri/geometry/webMercatorUtils esri/symbols/PictureMarkerSymbol jimu/portalUtils esri/config libs/usng/usng jimu/SpatialReference/unitUtils".split(" "),function(m,
d,p,w,q,v,r,n,f,l,g,e,x,y,a,C,D,E,F,G,H,A,I,B,z){var J={INCHES:"Inches",FOOT:"Foot",FEET:"Foot",FOOT_US:"Foot_US",YARDS:"Yards",MILES:"Miles",NAUTICAL_MILES:"Nautical_Miles",MILLIMETERS:"Millimeters",CENTIMETERS:"Centimeters",METER:"Meter",METERS:"Meter",KILOMETERS:"Kilometers",DECIMETERS:"Decimeters",DEGREE:"Decimal_Degrees",DECIMAL_DEGREES:"Decimal_Degrees",DEGREES_DECIMAL_MINUTES:"Degrees_Decimal_Minutes",DEGREE_MINUTE_SECONDS:"Degree_Minutes_Seconds",MGRS:"MGRS",USNG:"USNG"},u={esriCentimeters:"CENTIMETERS",
esriDecimalDegrees:"DECIMAL_DEGREES",esriDegreeMinuteSeconds:"DEGREE_MINUTE_SECONDS",esriDecimeters:"DECIMETERS",esriFeet:"FOOT",esriInches:"INCHES",esriKilometers:"KILOMETERS",esriMeters:"METER",esriMiles:"MILES",esriMillimeters:"MILLIMETERS",esriNauticalMiles:"NAUTICAL_MILES",esriPoints:"POINTS",esriUnknownUnits:"UNKNOWN",esriYards:"YARDS"};return m([v,p],{baseClass:"jimu-widget-coordinate",name:"Coordinate",popMenu:null,selectedWkid:null,selectedItem:null,selectedTfWkid:null,_defaultItem:null,
forward:!0,enableRealtime:!1,geoServiceUrl:null,_mapWkid:null,_configured:!1,_markerGraphic:null,moveTopOnActive:!1,_ENABLE_MAP_POPUP:!1,postMixInProperties:function(){this.nls.enableClick=this.nls.enableClick||"Click to enable clicking map to get coordinates";this.nls.disableClick=this.nls.disableClick||"Click to disable clicking map to get coordinates"},postCreate:function(){this.inherited(arguments);g.add(this.coordinateBackground,"coordinate-background");this.own(l(this.map,"extent-change",f.hitch(this,
this.onExtentChange)));this.own(l(this.map,"mouse-move",f.hitch(this,this.onMouseMove)));this.own(l(this.map,"click",f.hitch(this,this.onMapClick)));this.own(l(this.locateButton,"click",f.hitch(this,this.onLocateButtonClick)));this.own(l(this.foldContainer,"click",f.hitch(this,this.onFoldContainerClick)));this.graphicsLayer=new E;this.map.addLayer(this.graphicsLayer)},startup:function(){this.inherited(arguments);this.selectedWkid=this._mapWkid=this.map.spatialReference.isWebMercator()?3857:this.map.spatialReference.wkid;
this.config.spatialReferences&&1<this.config.spatialReferences.length?d.setStyle(this.foldableNode,"display","inline-block"):d.setStyle(this.foldableNode,"display","none")},onOpen:function(){this._processData().then(f.hitch(this,function(c){this.domNode&&(this.initPopMenu(c),1>=this.popMenu.getChildren().length&&d.setStyle(this.foldContainer,"display","none"))}),f.hitch(this,function(c){console.error(c)}))},_processMapUnits:function(c){var b=new a;if(c.units)b.resolve(c);else{var h=c.spatialReference||
f.exists("tileInfo.spatialReference",c)&&c.tileInfo.spatialReference,t=c.extent||c.initialExtent||c.fullExtent,d=h&&(h.latestWkid||h.wkid)||t&&t.spatialReference&&t.spatialReference.wkid,e=this;require(["jimu/SpatialReference/srUtils"],function(h){h.loadResource().then(f.hitch(e,function(){var a=h.getCSUnit(d);c.units=a;b.resolve(c)}))})}return b},_processData:function(){var c=new a,b=this.map.itemInfo.itemData.baseMap.baseMapLayers[0];this.config.spatialReferences&&this.config.spatialReferences.length?
(this._configured=!0,c.resolve(this.config.spatialReferences)):A.getUnits(this.appConfig.portalUrl).then(f.hitch(this,function(h){var a=b&&("BingMapsRoad"===b.type||"BingMapsHybrid"===b.type||"BingMapsAerial"===b.type),d=b&&"WebTiledLayer"===b.type,e=b&&"VectorTileLayer"===b.type;"WMS"===b.type?this._getWMSBaseMapInfo().then(f.hitch(this,function(b){this._configured=!1;c.resolve(b)})):b&&b.url?C({url:b.url,handleAs:"json",callbackParamName:"callback",content:{f:"json"}}).then(f.hitch(this,function(b){this._processMapUnits(b).then(f.hitch(this,
function(b){var a=this._getUnconfiguredUnitOptions(b.units,h),d=b.spatialReference,t=b.extent,d={wkid:d&&(d.latestWkid||d.wkid)||t&&t.spatialReference&&t.spatialReference.wkid,label:"",outputUnit:a.outputUnit};d.options={sameSRWithMap:!0,defaultUnit:u[b.units]||b.units,isGeographicUnit:a.isGeographicUnit,isGeographicCS:a.isGeographicCS,isProjectUnit:a.isProjectUnit,isProjectedCS:a.isProjectedCS,unitRate:a.unitRate};this._configured=!1;c.resolve(d)}))}),f.hitch(this,function(b){console.error(b);c.reject(b)})):
b&&("OpenStreetMap"===b.type||a||d||e)?(a=this._getUnconfiguredUnitOptions("esriMeters",h),d={wkid:3857,label:"",outputUnit:a.outputUnit},d.options={sameSRWithMap:!0,defaultUnit:u.esriMeters,isGeographicUnit:a.isGeographicUnit,isGeographicCS:a.isGeographicCS,isProjectUnit:a.isProjectUnit,isProjectedCS:a.isProjectedCS,unitRate:a.unitRate},this._configured=!1,c.resolve(d)):c.reject(Error("no baseMap"))}));return c},_getUnconfiguredUnitOptions:function(c,b){c=u[c]||c;var a="",d=1,k="",f="",e="",g="";
z.isProjectUnit(c)?(e=g=!0,k=f=!1,a="english"===b?u.esriFeet.toUpperCase():u.esriMeters.toUpperCase(),d=z.getUnitRate(c.toUpperCase(),a)):z.isGeographicUnit(c)&&(e=g=!1,k=f=!0,a=c.toUpperCase());this.map.spatialReference.isWebMercator()&&(a=u.esriDecimalDegrees,f=!0,g=!1,d=1);return{outputUnit:a,unitRate:d,isGeographicUnit:f,isGeographicCS:k,isProjectUnit:g,isProjectedCS:e}},initPopMenu:function(c){this.popMenu=new e({},this.coordinateMenu);y.after(this.popMenu,"onItemClick",f.hitch(this,this.onClickMenu),
!0);"[object Array]"!==Object.prototype.toString.call(c)?(this.selectedWkid=parseInt(c.wkid,10),this.addMenuItem("",this.selectedWkid,c.outputUnit,null,null,c.options,c.isDefault,c.alias),this.selectedItem=this.popMenu.getChildren()[0]):(this._addAllMenuItems(),this._setDefaultItme(),null===this.selectedItem&&(this.selectedItem=this.popMenu.getChildren()[0]));this.selectedWkid=parseInt(this.selectedItem.params.wkid,10);this.selectedTfWkid=this.selectedItem.params.transformationWkid&&parseInt(this.selectedItem.params.transformationWkid,
10);this.selectedItem.set({label:this.getStatusString(!0,this.selectedItem.params.alias||this.selectedItem.params.name,this.selectedItem.params.wkid,this.selectedItem.params.isDefault)});d.addClass(this.selectedItem.domNode,"selected-item");this._adjustCoordinateInfoUI(this.selectedWkid);this.popMenu.startup()},_addAllMenuItems:function(){for(var c=this.config.spatialReferences.length,b=0;b<c;b++)this.addMenuItem(this.config.spatialReferences[b].label,this.config.spatialReferences[b].wkid,this.config.spatialReferences[b].outputUnit,
this.config.spatialReferences[b].transformationWkid,this.config.spatialReferences[b].transformForward,this.config.spatialReferences[b].options,this.config.spatialReferences[b].isDefault,this.config.spatialReferences[b].alias)},_isWebMercator:function(c){return q.prototype._isWebMercator?q.prototype._isWebMercator.apply({wkid:parseInt(c,10)},[]):(new q(parseInt(c,10))).isWebMercator()},canShowInClient:function(c){c=4326===this._mapWkid&&this._isWebMercator(c)||this._isWebMercator(this._mapWkid)&&4326===
parseInt(c,10);var b=this.selectedItem.get("options");return b&&b.sameSRWithMap||c?!0:!1},onClickMenu:function(c){d.removeClass(this.selectedItem.domNode,"selected-item");this.selectedItem.set({label:this.getStatusString(!1,this.selectedItem.params.alias||this.selectedItem.params.name,this.selectedItem.params.wkid,this.selectedItem.params.isDefault)});this.selectedWkid=parseInt(c.params.wkid,10);this.selectedTfWkid=c.params.tfWkid;this.forward=c.params.forward;c.set({label:this.getStatusString(!0,
c.params.alias||c.params.name,c.params.wkid,c.params.isDefault)});d.addClass(c.domNode,"selected-item");this.selectedItem=c;this._adjustCoordinateInfoUI(this.selectedWkid);d.removeClass(this.coordinateMenuContainer,"display-coordinate-menu")},_adjustCoordinateInfoUI:function(c){d.removeClass(this.coordinateInfoMenu,"coordinate-info-menu-empty");this.graphicsLayer.remove(this._markerGraphic);this._markerGraphic=null;this.canShowInClient(c)?(this.enableRealtime=!0,this._getDefaultPlaceHolder()):(this.enableRealtime=
!1,this.coordinateInfo.innerHTML="",d.addClass(this.coordinateInfoMenu,"coordinate-info-menu-empty"));d.setAttr(this.locateButton,"title",this.nls.enableClick);d.removeClass(this.locateContainer,"coordinate-locate-container-active");this.enableWebMapPopup();this.onExtentChange({extent:this.map.extent})},disableWebMapPopup:function(){this._ENABLE_MAP_POPUP=!1;this.map.setInfoWindowOnClick(!1)},enableWebMapPopup:function(){this._ENABLE_MAP_POPUP=!0;this.map.setInfoWindowOnClick(!0)},onLocateButtonClick:function(){if(d.hasClass(this.coordinateMenuContainer,
"display-coordinate-menu"))this.onFoldContainerClick();d.removeClass(this.coordinateInfoMenu,"coordinate-info-menu-empty");d.toggleClass(this.locateContainer,"coordinate-locate-container-active");this.graphicsLayer.remove(this._markerGraphic);this._markerGraphic=null;this.canShowInClient(this.selectedWkid)?this.enableRealtime?(this.enableRealtime=!1,this.coordinateInfo.innerHTML=this.nls.hintMessage,d.setAttr(this.locateButton,"title",this.nls.disableClick),this.disableWebMapPopup()):(this.enableRealtime=
!0,this._getDefaultPlaceHolder(),d.setAttr(this.locateButton,"title",this.nls.enableClick),this.enableWebMapPopup()):d.hasClass(this.locateContainer,"coordinate-locate-container-active")?(this.coordinateInfo.innerHTML=this.nls.hintMessage,this.disableWebMapPopup(),d.setAttr(this.locateButton,"title",this.nls.disableClick)):(this.coordinateInfo.innerHTML="",d.addClass(this.coordinateInfoMenu,"coordinate-info-menu-empty"),this.enableWebMapPopup(),d.setAttr(this.locateButton,"title",this.nls.enableClick))},
onActive:function(){this.locateContainer&&d.hasClass(this.locateContainer,"coordinate-locate-container-active")&&(!0===this._ENABLE_MAP_POPUP?this.enableWebMapPopup():this.disableWebMapPopup())},onDeActive:function(){if(d.hasClass(this.locateContainer,"coordinate-locate-container-active"))this.onLocateButtonClick();if(d.hasClass(this.coordinateMenuContainer,"display-coordinate-menu"))this.onFoldContainerClick()},getStatusString:function(c,b,a,d){var h="";a=parseInt(a,10);h=c?"\x3cb\x3e"+h+b+"\x3c/b\x3e\x26nbsp;"+
this._rtlTheBrackets(a)+"\x26nbsp;":h+b+"\x26nbsp;\x26nbsp;"+this._rtlTheBrackets(a)+"\x26nbsp;";d&&(h+=this.nls.defaultLabel);return h},_rtlTheBrackets:function(c){return window.isRTL?"\x26rlm;("+c+")":"("+c+")"},addMenuItem:function(c,b,a,d,k,f,e,g){c={label:this.getStatusString(!1,g||c,b,e)||"",name:c||"",wkid:b||"",outputUnit:a||"",tfWkid:d||"",options:f,isDefault:e,alias:g};c.tfWkid&&(c.forward=k);this.popMenu.addChild(new x(c))},_toFormat:function(c){return isNaN(c)?"":r.localizeNumberByFieldInfo(c,
{format:{places:this.config.decimalPlaces,digitSeparator:this.config.addSeparator}})},onProjectComplete:function(c,b){if(this.selectedWkid&&c===this.selectedWkid&&this.domNode){b=b[0];c=b.x;b=b.y;var a=this.selectedItem.get("outputUnit"),d=this.selectedItem.get("options");"MGRS"===a||"USNG"===a?this._displayUsngOrMgrs(a,b,c):d.isGeographicUnit?this._displayDegOrDms(a,b,c):this._displayProject(a,b,c)}},_unitToNls:function(c){var b=J[c.toUpperCase()];return this.nls[b]||this.nls[c]||c},onProjectError:function(c){new n({message:c.message||
c.toString()});this.coordinateInfo.innerHTML=this.nls.hintMessage},onExtentChange:function(c){if(this.selectedItem){var b=d.position(this.domNode),a=d.position(this.map.root);if(!window.isRTL)b.x-a.x+b.w+5>=a.w&&("left"in this.position?d.setStyle(this.domNode,"right","5px"):d.setStyle(this.domNode,"left","5px"));else if(0>=b.x-a.x||b.x-a.x+b.w+5>=a.w)"left"in this.position?d.setStyle(this.domNode,"left","5px"):d.setStyle(this.domNode,"right","5px");window.appInfo.isRunInMobile?(this.graphicsLayer.remove(this._markerGraphic),
this._markerGraphic=null,d.setStyle(this.locateContainer,"display","none"),d.removeClass(this.coordinateMenuContainer,"display-coordinate-menu"),this.canShowInClient(this.selectedWkid)?this._displayOnClient(c.extent.getCenter()):this._projectMapPoint(c.extent.getCenter())):(d.setStyle(this.locateContainer,"display","block"),1<this.popMenu.getChildren().length?d.setStyle(this.foldContainer,"display","block"):d.setStyle(this.foldContainer,"display","none"))}},_getMarkerGraphic:function(c){var b=new H(this.folderUrl+
"css/images/esriGreenPin16x26.png",16,26);b.setOffset(0,12);return new D(c,b)},onMapClick:function(c){window.appInfo.isRunInMobile||this.enableRealtime||!this.selectedItem||(!this.canShowInClient(this.selectedWkid)&&!d.hasClass(this.locateContainer,"coordinate-locate-container-active")||this._markerGraphic||(this._markerGraphic=this._getMarkerGraphic(c.mapPoint),this.graphicsLayer.add(this._markerGraphic)),this.canShowInClient(this.selectedWkid)?(this._markerGraphic.setGeometry(c.mapPoint),this._displayOnClient(c.mapPoint)):
d.hasClass(this.locateContainer,"coordinate-locate-container-active")&&(this._markerGraphic.setGeometry(c.mapPoint),c=new w(c.mapPoint.x,c.mapPoint.y,this.map.spatialReference),this._projectMapPoint(c)))},_projectMapPoint:function(c){var b=new F,a=null,d=this.selectedItem.get("options");b.geometries=[c];d.isProjectedCS?a=d.isProjectUnit?this.selectedWkid:d.spheroidCS:d.isGeographicCS&&(a=this.selectedWkid);this.selectedTfWkid&&(b.transformation=new q(parseInt(this.selectedTfWkid,10)),b.transformForward=
JSON.parse(this.forward));b.outSR=new q(parseInt(a,10));this.coordinateInfo.innerHTML=this.nls.computing;I.defaults.geometryService.project(b,f.hitch(this,this.onProjectComplete,this.selectedWkid),f.hitch(this,this.onProjectError))},_displayOnClient:function(c){var b=this.selectedItem.get("outputUnit"),a=c.x,d=c.y,k=null,f=4326===this._mapWkid&&this._isWebMercator(this.selectedWkid)||this._isWebMercator(this._mapWkid)&&4326===this.selectedWkid,e=this.selectedItem.get("options"),k=c.normalize();e.isGeographicUnit&&
(a=k.getLongitude()||a);e.isGeographicUnit&&(d=k.getLatitude()||d);f?4326===c.spatialReference.wkid&&this._isWebMercator(this.selectedWkid)?"MGRS"===b||"USNG"===b?this._displayUsngOrMgrs(b,k.getLatitude(),k.getLongitude()):e.isGeographicUnit?this._displayDegOrDms(b,d,a):e.isProjectUnit&&(c=G.lngLatToXY(a,d),this._displayProject(b,c[1],c[0])):c.spatialReference.isWebMercator()&&4326===this.selectedWkid&&("MGRS"===b||"USNG"===b?this._displayUsngOrMgrs(b,k.getLatitude(),k.getLongitude()):e.isGeographicUnit&&
this._displayDegOrDms(b,d,a)):e.defaultUnit===b?(this._displayCoordinatesByOrder(this._toFormat(a),this._toFormat(d)),this.coordinateInfo.innerHTML+=" "+this._unitToNls(b)):4326===c.spatialReference.wkid||c.spatialReference.isWebMercator()?"MGRS"===b||"USNG"===b?this._displayUsngOrMgrs(b,k.getLatitude(),k.getLongitude()):e.isGeographicUnit?this._displayDegOrDms(b,d,a):e.isProjectedCS&&this._displayProject(b,d,a):e.isProjectedCS?this._displayProject(b,d,a):e.isGeographicCS&&("MGRS"===b||"USNG"===b?
this._displayUsngOrMgrs(b,d,a):e.isGeographicUnit&&this._displayDegOrDms(b,d,a))},onMouseMove:function(c){window.appInfo.isRunInMobile||this.enableRealtime&&this.selectedItem&&this._displayOnClient(c.mapPoint)},destroy:function(){this._markerGraphic&&this.graphicsLayer.remove(this._markerGraphic);this.graphicsLayer&&this.map.removeLayer(this.graphicsLayer);this.inherited(arguments)},_displayUsngOrMgrs:function(c,b,a){"MGRS"===c?this.coordinateInfo.innerHTML=B.LLtoMGRS(b,a,5):"USNG"===c&&(this.coordinateInfo.innerHTML=
B.LLtoUSNG(b,a,5));isNaN(b)&&isNaN(a)?this.coordinateInfo.innerHTML="":this.coordinateInfo.innerHTML+=" "+this._unitToNls(c)},_displayDegOrDms:function(c,b,a){var d="",h="",d=this.selectedItem.get("options");a*=d.unitRate;b*=d.unitRate;"DEGREE_MINUTE_SECONDS"===c?(h=this.degToDMS(a,"LON"),d=this.degToDMS(b,"LAT"),this._displayCoordinatesByOrder(h,d)):"DEGREES_DECIMAL_MINUTES"===c?(h=this.degToDDM(a),d=this.degToDDM(b),this._displayCoordinatesByOrder(h,d)):(this._displayCoordinatesByOrder(this._toFormat(a),
this._toFormat(b)),isNaN(b)&&isNaN(a)?this.coordinateInfo.innerHTML="":this.coordinateInfo.innerHTML+=" "+this._unitToNls(c))},_displayProject:function(c,b,a){var d=this.selectedItem.get("options");a*=d.unitRate;b*=d.unitRate;this._displayCoordinatesByOrder(this._toFormat(a),this._toFormat(b));isNaN(b)&&isNaN(a)?this.coordinateInfo.innerHTML="":this.coordinateInfo.innerHTML+=" "+this._unitToNls(c)},_displayCoordinatesByOrder:function(c,a){this.coordinateInfo.innerHTML=this.config.displayOrderLonLat?
c+"  "+a:a+"  "+c},onFoldContainerClick:function(){this._configured&&d.toggleClass(this.coordinateMenuContainer,"display-coordinate-menu")},degToDMS:function(c,a){var b=Math.abs(c),d=Math.floor(b),b=b-d,e=Math.floor(60*b),b=Math.floor(3600*(b-e/60));60===b&&(e++,b=0);60===e&&(d++,e=0);return d+"\x26deg;"+(10>e?"0"+e:e)+"\x26prime;"+(10>b?"0"+b:b)+"\x26Prime;"+("LAT"===a?0>c?"S":"N":0>c?"W":"E")},degToDDM:function(c){var b=Math.abs(c);c=Math.floor(b);var b=b-c,a=Math.floor(60*b),b=Math.floor(3600*
(b-a/60));60===b&&(a++,b=0);60===a&&(c++,a=0);a=r.localizeNumberByFieldInfo(a+b/60,{format:{places:this.config.decimalPlaces,digitSeparator:this.config.addSeparator}});return c+"\x26deg;"+a+"\x26prime;"},_getWMSBaseMapInfo:function(){var c=new a;require(["jimu/SpatialReference/srUtils"],f.hitch(this,function(a){a.loadResource().then(f.hitch(this,function(){var b=this.map.spatialReference.wkid;A.getUnits(this.appConfig.portalUrl).then(f.hitch(this,function(d){if(a.isValidWkid(b)){var e={wkid:a.standardizeWkid(b),
label:a.getSRLabel(parseInt(b,10))};a.isProjectedCS(e.wkid)?e.outputUnit="english"===d?"FOOT":"METER":e.outputUnit=e.outputUnit||a.getCSUnit(e.wkid);d={sameSRWithMap:a.isSameSR(e.wkid,this.map.spatialReference.wkid),isGeographicCS:a.isGeographicCS(e.wkid),isGeographicUnit:a.isGeographicUnit(e.outputUnit),isProjectedCS:a.isProjectedCS(e.wkid),isProjectUnit:a.isProjectUnit(e.outputUnit),spheroidCS:a.isProjectedCS(e.wkid)?a.getGeoCSByProj(e.wkid):e.wkid,defaultUnit:a.getCSUnit(e.wkid),unitRate:a.getUnitRate(a.getCSUnit(e.wkid),
e.outputUnit)};this.map.spatialReference.isWebMercator()&&(d.isGeographicUnit=!0,d.isProjectUnit=!1,d.unitRate=1,e.outputUnit="DECIMAL_DEGREES");"DEGREES_DECIMAL_MINUTES"===e.outputUnit&&(d.isGeographicUnit=!0,d.unitRate=1);e.options=d;c.resolve(e)}}),f.hitch(this,function(a){console.error(a);c.reject(a)}))}))}));return c},_setDefaultItme:function(){var a,b,d;a=0;for(b=this.popMenu.getChildren().length;a<b;a++)if(d=this.popMenu.getChildren()[a],!0===d.params.isDefault){this._defaultItem=this.selectedItem=
d;break}var e=this._mapWkid;if(!this._defaultItem)for(a=0,b=this.popMenu.getChildren().length;a<b;a++)if(d=this.popMenu.getChildren()[a],parseInt(d.params.wkid,10)===parseInt(e,10)){d.set({isDefault:!0});d.params.isDefault=!0;this._defaultItem=d;break}this._defaultItem&&this._setDefaultItemStyle(this._defaultItem)},_setDefaultItemStyle:function(a){a.set({label:this.getStatusString(!1,a.params.alias||a.params.name,a.params.wkid,a.params.isDefault)})},_getDefaultPlaceHolder:function(){r.isMobileUa()?
this.coordinateInfo.innerHTML="":this.coordinateInfo.innerHTML=this.nls.realtimeLabel}})});