//>>built
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/query jimu/BaseWidget dojo/_base/window jimu/utils".split(" "),function(e,f,b,g,c,h,k,d){return e([h],{name:"FullScreen",baseClass:"jimu-widget-fullScreen",domsCache:{appDoc:null},ACTION:{HIDE:"hide",SHOW:"show"},MODE:{RESTORE:"restore",MAXIMIZE:"maximize"},state:null,_changeColorThemes:["BillboardTheme","BoxTheme","DartTheme","PlateauTheme"],startup:function(){this.domsCache.appDoc=k.doc;this.state=this.MODE.RESTORE;b.addClass(this.fullScreenBtn,
this.state);-1<this._changeColorThemes.indexOf(this.appConfig.theme.name)&&b.addClass(this.domNode,"jimu-main-background");this.own(g(this.domsCache.appDoc,"webkitfullscreenchange,mozfullscreenchange,MSFullscreenChange,fullscreenchange",f.hitch(this,function(){this._onFullScreenChangeEvent()})))},setPosition:function(){this.inherited(arguments);"DashboardTheme"!==window.getAppConfig().theme.name||window.appInfo.isRunInMobile||(b.setStyle(this.domNode,"z-index",110),this.placeAt(this._getDBThemeContainer()));
window.appInfo.isRunInMobile||d.isMobileUa()?b.addClass(this.domNode,"mobile"):b.removeClass(this.domNode,"mobile")},onAppConfigChanged:function(a){-1<this._changeColorThemes.indexOf(a.theme.name)?b.addClass(this.domNode,"jimu-main-background"):b.removeClass(this.domNode,"jimu-main-background")},_onFullScreenClick:function(){this._toggleFullScreen()},_onFullScreenChangeEvent:function(){this._isFullScreen()?this.state=this.MODE.MAXIMIZE:(this.state=this.MODE.RESTORE,this._toggleFullScreen(this.state));
this._toggleBtnIcon()},_toggleFullScreen:function(a){this._isFullScreen()||a===this.MODE.RESTORE?this._cancelFullScreen(this.domsCache.appDoc):this._launchFullScreen(this.domsCache.appDoc.body)},_toggleBtnIcon:function(){this.state===this.MODE.RESTORE?(b.addClass(this.fullScreenBtn,"restore"),b.removeClass(this.fullScreenBtn,"maximize"),b.removeClass(this.domsCache.appDoc.body,"body-fullscreened")):(b.addClass(this.fullScreenBtn,"maximize"),b.removeClass(this.fullScreenBtn,"restore"),b.addClass(this.domsCache.appDoc.body,
"body-fullscreened"))},_isFullScreen:function(){var a=this._isElementFullScreen(this.domsCache.appDoc);d.isInConfigOrPreviewWindow()&&!1===this._isFullScreenCountByJS(window)&&!0===this._isFullScreenCountByJS(this._getBuilderWindow())&&(a=!1);return a},_getBuilderWindow:function(){return window.parent},_getDBThemeContainer:function(){var a=null;return a=window.appInfo.isRunInMobile?c("#main-page .DashboardTheme")[0]:c(".jimu-dnd-layout")[0]},_isFullScreenCountByJS:function(a){return Math.floor(a.innerWidth)===
Math.floor(screen.width)&&Math.floor(a.innerHeight)===Math.floor(screen.height)},_isElementFullScreen:function(a){return!!(a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement)},_launchFullScreen:function(a){if(a.requestFullScreen)a.requestFullScreen();else if(a.mozRequestFullScreen)a.mozRequestFullScreen();else if(a.webkitRequestFullScreen)a.webkitRequestFullScreen();else if(a.msRequestFullscreen)a.msRequestFullscreen();else return!1},_cancelFullScreen:function(a){if(a.exitFullscreen)a.exitFullscreen();
else if(a.mozCancelFullScreen)a.mozCancelFullScreen();else if(a.webkitCancelFullScreen)a.webkitCancelFullScreen();else if(a.msExitFullscreen)a.msExitFullscreen();else return!1}})});