//>>built
require({cache:{"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),function(f,h,d,a,g,e,l,m,k){a("dijit-legacy-requires")&&e(0,function(){f(["dijit/form/RadioButton"])});return h("dijit.form.CheckBox",[l,m],{templateString:k,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=
!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&g("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&g("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},
"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(f,h){return f("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(d){this._set("readOnly",d);h.set(this.focusNode,"readOnly",d)},_setLabelAttr:void 0,_getSubmitValue:function(d){return null==d||""===d?"on":d},_setValueAttr:function(d){d=this._getSubmitValue(d);this._set("value",d);h.set(this.focusNode,"value",d)},reset:function(){this.inherited(arguments);
this._set("value",this._getSubmitValue(this.params.value));h.set(this.focusNode,"value",this.value)},_onClick:function(d){return this.readOnly?(d.stopPropagation(),d.preventDefault(),!1):this.inherited(arguments)}})})},"widgets/ISRenderer/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/text!./config.json"],function(){})},"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n',
"url:widgets/ISRenderer/Widget.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"rendererContainer"\x3e\r\n        \x3cbr/\x3e\r\n        Current Layer:\x26nbsp;\x3cdiv data-dojo-attach-point\x3d"activeLayerName" style\x3d"display: inline-block;color: #0080C0;font-weight: bold;"\x3e\x3c/div\x3e\r\n        \x3cbr/\x3e\r\n        \x3cbr/\x3e\r\n        \x3cselect id\x3d"service_functions" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:80px;height:12px;"\x3e\r\n        \x3c/select\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"stretchDiv" style\x3d"display:inline"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/DropDownButton"\x3e\r\n                \x3cspan\x3e\x3cimg src\x3d"widgets/ISRenderer/images/props.png" height\x3d"15"/\x3e\x3c/span\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/TooltipDialog"\x3e\r\n                    \x3ch4\x3eStretch Parameters\x3c/h4\x3e\r\n                    \x3chr\x3e\r\n                    \x3cbr /\x3e\r\n                    \x3cimg src\x3d"widgets/ISRenderer/images/red.png" height\x3d"12" width\x3d"12" \x3e  \x3cdiv style\x3d"width:10px;display:inline-block"\x3eR\x3c/div\x3e \r\n                    \x3cselect data-dojo-type\x3d"dijit/form/Select" id\x3d"Red" style\x3d"width:20px;height:12px;position: relative;top: -2px;;"\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cimg src\x3d"widgets/ISRenderer/images/green.png" height\x3d"12" width\x3d"12" style\x3d"margin-left: 10px;"\x3e  \x3cdiv style\x3d"width:10px;display:inline-block;"\x3eG\x3c/div\x3e\r\n                    \x3cselect data-dojo-type\x3d"dijit/form/Select" id\x3d"Green" style\x3d"width:20px;height:12px;position: relative;top: -2px;"\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cimg src\x3d"widgets/ISRenderer/images/blue.png" height\x3d"12" width\x3d"12" style\x3d"margin-left: 10px;"\x3e  \x3cdiv style\x3d"width:10px;display:inline-block;"\x3eB\x3c/div\x3e\r\n                    \x3cselect data-dojo-type\x3d"dijit/form/Select" id\x3d"Blue" style\x3d"width:20px;height:12px;position: relative;top: -2px;"\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cbr/\x3e\r\n                    \x3cbr/\x3e\r\n                    \x3cdiv style\x3d"width:80px;display:inline-block;"\x3e\x3clabel for\x3d"StretchType"\x3eStretch Type\x3c/label\x3e\x3c/div\x3e:\r\n                    \x3cselect id\x3d"StretchType" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100px;height:12px;"\x3e\r\n                        \x3coption value\x3d5\x3eMinimum and Maximum\x3c/option\x3e\r\n                        \x3coption value\x3d3\x3eStandard Deviation\x3c/option\x3e\r\n                        \x3coption value\x3d6\x3ePercent Clip\x3c/option\x3e\r\n                    \x3c/select\x3e\r\n\r\n                    \x3cinput id\x3d"DRA" data-dojo-type\x3d"dijit/form/CheckBox" style\x3d"margin-left:10px;"/\x3e \x3clabel for\x3d"DRA"\x3eDRA\x3c/label\x3e\r\n                    \x3cdiv data-dojo-type\x3d"dijit/Tooltip" data-dojo-props\x3d"connectId:\'DRA\',position:[\'below\']"\x3e\r\n                        Dynamic Range Adjustment updates enhancement based on current view\r\n                    \x3c/div\x3e\r\n                    \x3cbr/\x3e\r\n                    \x3cbr/\x3e\r\n                    \x3cdiv style\x3d"width:80px;display:inline-block;"\x3e\x3clabel for\x3d"Gamma"\x3eGamma\x3c/label\x3e\x3c/div\x3e:\r\n                    \x3cdiv style\x3d"width:150px;display:inline-block;position: relative;top: 8px;" data-dojo-type\x3d"dijit/form/HorizontalSlider" data-dojo-props\x3d"value:0,minimum:-10,maximum:10,intermediateChanges:true,showButtons:true" id\x3d"Gamma"\x3e\r\n                        \x3col data-dojo-type\x3d"dijit/form/HorizontalRuleLabels" container\x3d"bottomDecoration" style\x3d"height:1em;font-size:75%;color:gray;"\x3e\r\n                            \x3cli\x3e0.1\x3c/li\x3e\r\n                            \x3cli\x3e10\x3c/li\x3e\r\n                        \x3c/ol\x3e\r\n                    \x3c/div\x3e\x3cdiv data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:0.1,max:10}, value:1" id\x3d"Gamma_label" style\x3d"width:55px;height:30px;position: relative;top: -4px;"\x3e\x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"StdDev"\x3e\r\n                        \x3cbr/\x3e      \r\n                        \x3cbr/\x3e\r\n                        \x3cdiv style\x3d"width:80px;display:inline-block;"\x3e\x3clabel for\x3d"NumberOfStandardDeviations"\x3e# of Std. Dev.\x3c/label\x3e\x3c/div\x3e:\r\n                        \x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true, constraints:{min:0}, value:2" id\x3d"NumberOfStandardDeviations" style\x3d"width:65px;height:25px;"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"PercentClip"\x3e\r\n                        \x3cbr/\x3e\r\n                        \x3cbr/\x3e\r\n                        \x3cdiv style\x3d"width:80px;display:inline-block;"\x3e\x3clabel for\x3d"MaxPercent"\x3eExclude top\x3c/label\x3e\x3c/div\x3e:\r\n                        \x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true, constraints:{min:0,max:100}, value:2" id\x3d"MaxPercent" style\x3d"width:65px;height:25px;"\x3e\x3c/div\x3e\r\n                        \x3cdiv data-dojo-type\x3d"dijit/Tooltip" data-dojo-props\x3d"connectId:\'MaxPercent\',position:[\'below\']"\x3e\r\n                            Exclude top x percentage of histogram\r\n                        \x3c/div\x3e\r\n                        \x3cdiv style\x3d"width:90px;display:inline-block;"\x3e \x3clabel for\x3d"MinPercent"\x3eExclude bottom\x3c/label\x3e\x3c/div\x3e:\r\n                        \x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true, constraints:{min:0,max:100}, value:2" id\x3d"MinPercent" style\x3d"width:65px;height:25px;"\x3e\x3c/div\x3e\r\n                        \x3cdiv data-dojo-type\x3d"dijit/Tooltip" data-dojo-props\x3d"connectId:\'MinPercent\',position:[\'below\']"\x3e\r\n                            Exclude bottom x percentage of histogram\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"display:inline-block;"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" id\x3d"idapply"\x3eApply\x3c/button\x3e\r\n            \x3cdiv\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"rendererErrorContainer" style\x3d"color:red;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:widgets/ISRenderer/css/style.css":".esriLegendServiceLabel {font-size: 14px;}.esriLegendLayer{font-size: 12px;}.red{background-image: url(../images/red.png);}","url:widgets/ISRenderer/config.json":"{\r\n}"}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/BaseWidget dijit/registry dojo/_base/lang dojo/dom-style dojo/dom-construct esri/request dojo/html esri/layers/RasterFunction dijit/form/Select dijit/form/HorizontalSlider dijit/form/Button dijit/form/NumberSpinner dijit/form/CheckBox dijit/form/HorizontalRuleLabels dijit/form/NumberTextBox dijit/TooltipDialog dijit/form/DropDownButton dijit/Tooltip".split(" "),function(f,h,d,a,g,e,l,m,k,n){f=f([d,h],{name:"ISRenderer",baseClass:"jimu-widget-ISRenderer",
previousImageServiceLayerUrl:null,imageServiceLayer:null,startup:function(){this.inherited(arguments);l.place('\x3cimg id\x3d"loadingid" style\x3d"position: absolute;top:0;bottom: 0;left: 0;right: 0;margin:auto;z-index:100;" src\x3d"'+require.toUrl("jimu")+'/images/loading.gif"\x3e',this.domNode);this.hideLoading()},postCreate:function(){a.byId("Gamma").on("change",g.hitch(this,this.changeGammaLabel));a.byId("Gamma_label").on("change",g.hitch(this,this.changeGammaSlider));a.byId("idapply").on("click",
g.hitch(this,this.applyParams));a.byId("service_functions").on("change",g.hitch(this,this.checkStretchDiv));a.byId("StretchType").on("change",g.hitch(this,this.checkStretchTypeDiv));this.map&&(this.map.on("update-start",g.hitch(this,this.showLoading)),this.map.on("update-end",g.hitch(this,this.hideLoading)))},onOpen:function(){this.refreshData();this.map&&(this.refreshHandler=this.map.on("update-end",g.hitch(this,this.refreshData)))},onClose:function(){this.refreshHandler&&(this.refreshHandler.remove(),
this.refreshHandler=null);this.previousImageServiceLayerUrl=null},refreshData:function(){if(this.map.layerIds){if(this.map.primaryLayer)this.imageServiceLayer=this.map.getLayer(this.map.primaryLayer);else for(var b=this.map.layerIds.length-1;0<=b;b--){var c=this.map.getLayer(this.map.layerIds[b]),d=c.arcgisProps&&c.arcgisProps.title?c.arcgisProps.title:c.title;if(c&&c.visible&&c.serviceDataType&&"esriImageService"===c.serviceDataType.substr(0,16)&&"resultLayer"!==c.id&&"scatterResultLayer"!==c.id&&
c.id!==this.map.resultLayer&&(!d||"_"!==d.charAt(d.length-1))){this.imageServiceLayer=c;break}else this.imageServiceLayer=null}this.imageServiceLayer?(e.set(this.rendererContainer,"display","block"),k.set(this.rendererErrorContainer,""),this.imageServiceLayer.url!==this.previousImageServiceLayerUrl&&(this.populateBands(),this.populateServiceFunctions()),this.imageServiceLayer.bandIds&&(b=this.imageServiceLayer.bandIds,a.byId("Red").set("value",b[0]),a.byId("Green").set("value",b[1]),a.byId("Blue").set("value",
b[2])),this.imageServiceLayer.renderingRule&&(b=new n(this.imageServiceLayer.renderingRule),"Stretch"==b.functionName&&(arguments=b.functionArguments,arguments.DRA&&a.byId("DRA").set("checked",arguments.DRA),a.byId("StretchType").set("value",arguments.StretchType),arguments.MaxPercent&&a.byId("MaxPercent").set("value",arguments.MaxPercent),arguments.MinPercent&&a.byId("MaxPercent").set("value",arguments.MinPercent),arguments.NumberOfStandardDeviations&&a.byId("NumberOfStandardDeviations").set("value",
arguments.NumberOfStandardDeviations),a.byId("Gamma_label").set("value",arguments.Gamma[0])))):(e.set(this.rendererContainer,"display","none"),k.set(this.rendererErrorContainer,"No visible Imagery Layers in the map."))}},populateBands:function(){this.previousImageServiceLayerUrl=this.imageServiceLayer.url;var b=this.imageServiceLayer.bandCount;a.byId("Red").removeOption(a.byId("Red").getOptions());a.byId("Green").removeOption(a.byId("Green").getOptions());a.byId("Blue").removeOption(a.byId("Blue").getOptions());
a.byId("Red").addOption({label:"-",value:""});a.byId("Green").addOption({label:"-",value:""});a.byId("Blue").addOption({label:"-",value:""});for(var c=0;c<b;c++)a.byId("Red").addOption({label:""+(c+1)+"",value:""+c+""}),a.byId("Green").addOption({label:""+(c+1)+"",value:""+c+""}),a.byId("Blue").addOption({label:""+(c+1)+"",value:""+c+""})},changeGammaLabel:function(){a.byId("Gamma_label").set("value",parseFloat(Math.pow(10,a.byId("Gamma").get("value")/10)).toFixed(2))},changeGammaSlider:function(){a.byId("Gamma").set("value",
10*(Math.log(a.byId("Gamma_label").get("value"))/Math.log(10)))},applyParams:function(){if("None"!=a.byId("service_functions").get("value")){var b=new n;b.functionName=a.byId("service_functions").get("value");arguments={};if("Stretch"==a.byId("service_functions").get("value"))switch(this.imageServiceLayer.setBandIds([a.byId("Red").get("value"),a.byId("Green").get("value"),a.byId("Blue").get("value")],!0),arguments.DRA=a.byId("DRA").get("checked"),arguments.UseGamma=!0,arguments.Gamma=[parseFloat(a.byId("Gamma_label").get("value").toFixed(2)),
parseFloat(a.byId("Gamma_label").get("value").toFixed(2)),parseFloat(a.byId("Gamma_label").get("value").toFixed(2))],arguments.StretchType=parseInt(a.byId("StretchType").get("value")),a.byId("StretchType").get("value")){case "3":arguments.NumberOfStandardDeviations=a.byId("NumberOfStandardDeviations").get("value");break;case "6":arguments.MaxPercent=a.byId("MaxPercent").get("value"),arguments.MinPercent=a.byId("MinPercent").get("value")}else this.imageServiceLayer.setBandIds([],!0);b.functionArguments=
arguments;b.variableName="Raster";this.imageServiceLayer.setRenderingRule(b,!0)}else this.imageServiceLayer.setRenderingRule("",!0);this.imageServiceLayer.refresh()},populateServiceFunctions:function(){this.imageServiceLayer.rasterFunctionInfos&&this.imageServiceLayer.name?(k.set(this.activeLayerName,this.imageServiceLayer.title||this.imageServiceLayer.name||""),this.rendererRR(this.imageServiceLayer.rasterFunctionInfos)):m({url:this.imageServiceLayer.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(g.hitch(this,
function(a){k.set(this.activeLayerName,a.title||a.name||"");this.rendererRR(a.rasterFunctionInfos)}),function(a){console.log("Request failed")})},rendererRR:function(b){a.byId("service_functions").removeOption(a.byId("service_functions").getOptions());if(this.imageServiceLayer)for(var c=0;c<b.length;c++)a.byId("service_functions").addOption({label:b[c].name,value:b[c].name});a.byId("service_functions").addOption({label:"Stretch",value:"Stretch"});if(this.imageServiceLayer.renderingRule&&(b=new n(this.imageServiceLayer.renderingRule),
a.byId("service_functions").set("value",b.functionName),"Stretch"==b.functionName))switch(a.byId("StretchType").set("value",b.functionArguments.StretchType),a.byId("DRA").set("checked",b.functionArguments.DRA),a.byId("Gamma_label").set("value",b.functionArguments.Gamma[0]),b.functionArguments.StretchType){case "3":a.byId("NumberOfStandardDeviations").set("value",b.functionArguments.NumberOfStandardDeviations);break;case "6":a.byId("MaxPercent").set("value",b.functionArguments.MaxPercent),a.byId("MinPercent").set("value",
b.functionArguments.MinPercent)}this.checkStretchDiv()},checkStretchDiv:function(){"Stretch"==a.byId("service_functions").get("value")?(e.set(this.stretchDiv,"display","inline"),this.checkStretchTypeDiv()):e.set(this.stretchDiv,"display","none")},checkStretchTypeDiv:function(){switch(a.byId("StretchType").get("value")){case "5":e.set(this.StdDev,"display","none");e.set(this.PercentClip,"display","none");break;case "3":e.set(this.StdDev,"display","inline");e.set(this.PercentClip,"display","none");
break;case "6":e.set(this.StdDev,"display","none"),e.set(this.PercentClip,"display","inline")}},showLoading:function(){e.set("loadingid","display","block")},hideLoading:function(){e.set("loadingid","display","none")}});f.hasLocale=!1;f.hasSettingPage=!1;f.hasSettingUIFile=!1;f.hasSettingLocale=!1;f.hasSettingStyle=!1;return f});