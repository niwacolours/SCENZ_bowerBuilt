//>>built
define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/_base/html dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/portalUtils esri/units dojo/on dijit/Tooltip dojo/mouse jimu/dijit/CheckBox dijit/form/Select".split(" "),function(g,b,h,k,l,m,n,c,f,d,p,q){return g([m,l],{baseClass:"jimu-widget-measurement-setting",startup:function(){this.inherited(arguments);this.config.measurement||(this.config.measurement={});this._showToolsItems=[];d.position="below";this._initShowToolItem(this.showArea);
this._initShowToolItem(this.showDistance);this._initShowToolItem(this.showLocation);this.cbxOperationalLayer=new q({label:this.nls.operationalLayer,style:"margin-top:10px;margin-left:2px;"});k.addClass(this.cbxOperationalLayer.domNode,"tip");this.cbxOperationalLayer.placeAt(this.domNode);this.setConfig(this.config)},_processConfig:function(a){var e=new h;a.defaultLengthUnit&&a.defaultAreaUnit?e.resolve(a):n.getUnits(this.appConfig.portalUrl).then(b.hitch(this,function(b){a.defaultAreaUnit="english"===
b?c.SQUARE_MILES:c.SQUARE_KILOMETERS;a.defaultLengthUnit="english"===b?c.MILES:c.KILOMETERS;e.resolve(a)}));return e.promise},setConfig:function(a){this.config=a;this._processConfig(a).then(b.hitch(this,function(a){a.measurement.defaultAreaUnit?this.selectAreaUnit.set("value",a.measurement.defaultAreaUnit):this.selectAreaUnit.set("value","esriAcres");a.measurement.defaultLengthUnit?this.selectLengthUnit.set("value",a.measurement.defaultLengthUnit):this.selectLengthUnit.set("value","esriMiles");"undefined"!==
typeof a.showArea&&!1===a.showArea&&this.showArea.setValue(!1);"undefined"!==typeof a.showDistance&&!1===a.showDistance&&this.showDistance.setValue(!1);"undefined"!==typeof a.showLocation&&!1===a.showLocation&&this.showLocation.setValue(!1);a.isOperationalLayer?this.cbxOperationalLayer.setValue(!0):this.cbxOperationalLayer.setValue(!1)}))},getConfig:function(){this.config.measurement.defaultAreaUnit=this.selectAreaUnit.value;this.config.measurement.defaultLengthUnit=this.selectLengthUnit.value;this.config.showArea=
this.showArea.checked;this.config.showDistance=this.showDistance.checked;this.config.showLocation=this.showLocation.checked;this.config.isOperationalLayer=this.cbxOperationalLayer.checked;return this.config},_initShowToolItem:function(a){a&&(a.setValue(!0),this._showToolsItems.push(a),this.own(f(a,"change",b.hitch(this,this._onShowToolItemsChange,a))))},_onShowToolItemsChange:function(a){a&&!1===a.checked&&this._isItemsAllHide()&&(a.check(),d.hide(),d.show(this.nls.allHidedTips,a.domNode),this.own(f.once(a.domNode,
p.leave,b.hitch(this,function(){d.hide(a.domNode)}))))},_isItemsAllHide:function(){for(var a=0,b=this._showToolsItems.length;a<b;a++)if(!0===this._showToolsItems[a].checked)return!1;return!0}})});