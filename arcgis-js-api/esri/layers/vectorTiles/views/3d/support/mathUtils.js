//>>built
define(["require","exports","../lib/glMatrix"],function(g,c,f){function p(a){return Math.asin(1<a?1:-1>a?-1:a)}function q(a){return Math.acos(1<a?1:-1>a?-1:a)}function r(a,d,b){return a<d?d:a>b?b:a}function l(a){for(var d in a){var b=a[d];b instanceof Function&&(a[d]=b.bind(a))}return a}Object.defineProperty(c,"__esModule",{value:!0});c.deg2rad=function(a){return a*Math.PI/180};c.rad2deg=function(a){return 180*a/Math.PI};c.asin=p;c.acos=q;c.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};c.log2=
Math.log2||function(a){return Math.log(a)/Math.LN2};c.fovx2fovy=function(a,d,b){return 2*Math.atan(b*Math.tan(.5*a)/d)};c.fovy2fovx=function(a,d,b){return 2*Math.atan(d*Math.tan(.5*a)/b)};c.makeOrthonormal=function(a,d,b){b=b||a;var e=f.vec3d.dot(a,d);f.vec3d.set3(a[0]-e*d[0],a[1]-e*d[1],a[2]-e*d[2],b);f.vec3d.normalize(b)};c.tangentFrame=function(a,d,b){Math.abs(a[0])>Math.abs(a[1])?f.vec3d.set3(0,1,0,d):f.vec3d.set3(1,0,0,d);f.vec3d.cross(a,d,b);f.vec3d.normalize(d);f.vec3d.cross(b,a,d);f.vec3d.normalize(b)};
c.cartesianToSpherical=function(a,d){var b=f.vec3d.length(a),e=p(a[2]/b);f.vec3d.set3(b,e,Math.atan2(a[1]/b,a[0]/b),d)};c.sphericalToCartesian=function(a,d){var b=a[0],e=a[1];a=a[2];var c=Math.cos(e);f.vec3d.set3(b*c*Math.cos(a),b*c*Math.sin(a),b*Math.sin(e),d)};c.lerp=function(a,d,b){return a+(d-a)*b};c.bilerp=function(a,d,b,e,c,f){a+=(d-a)*c;return a+(b+(e-b)*c-a)*f};c.slerp=function(a,d,b,e){void 0===e&&(e=a);var c=f.vec3d.length(a),k=f.vec3d.length(d),h=f.vec3d.dot(a,d)/(c*k);if(.9999999999999999>
h){var h=Math.acos(h),g=((1-b)*c+b*k)/Math.sin(h),k=g/k*Math.sin(b*h);return f.vec3d.scale(a,g/c*Math.sin((1-b)*h),m),f.vec3d.scale(d,k,n),f.vec3d.add(m,n,e)}return f.vec3d.lerp(a,d,b,e)};c.angle=function(a,d,b){a=f.vec3d.normalize(a,m);d=f.vec3d.normalize(d,n);var e=q(f.vec3d.dot(a,d));return b&&(a=f.vec3d.cross(a,d,t),0>f.vec3d.dot(a,b))?-e:e};c.clamp=r;c.isFinite=Number.isFinite||function(a){return"number"==typeof a&&window.isFinite(a)};c.isNaN=Number.isNaN||function(a){return a!==a};c.makePiecewiseLinearFunction=
function(a){var d=a.length;return function(b){var e=0;if(b<=a[0][0])return a[0][1];if(b>=a[d-1][0])return a[d-1][1];for(;b>a[e][0];)e++;var c=a[e][0];b=(c-b)/(c-a[e-1][0]);return b*a[e-1][1]+(1-b)*a[e][1]}};c.vectorEquals=function(a,d){if(null==a||null==d)return a!==d;if(a.length!==d.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!==d[b])return!1;return!0};c.floatEqualRelative=function(a,d,b){if(void 0===b&&(b=1E-6),c.isNaN(a)||c.isNaN(d))return!1;if(a===d)return!0;var e=Math.abs(a-d),f=Math.abs(a),
g=Math.abs(d);if(0===a||0===d||1E-12>f&&1E-12>g){if(e>.01*b)return!1}else if(e/(f+g)>b)return!1;return!0};c.floatEqualAbsolute=function(a,d,b){return void 0===b&&(b=1E-6),!c.isNaN(a)&&!c.isNaN(d)&&(a>d?a-d:d-a)<=b};g=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}return a.prototype.ndiff=function(a,b){return void 0===b&&(b=0),Math.ceil((a-b)/this.range)*this.range+b},a.prototype._normalize=function(a,b,e,c){return void 0===c&&(c=0),e-=c,e<a?e+=this.ndiff(a-e):e>b&&(e-=this.ndiff(e-
b)),e+c},a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)},a.prototype.clamp=function(a,b){return void 0===b&&(b=0),r(a-b,this.min,this.max)+b},a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)},a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)},a.prototype.center=function(a,b,c){return b=this.monotonic(a,b,c),this.normalize((a+b)/2,c)},a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a},a.prototype.contains=
function(a,b,c){return b=this.minimalMonotonic(a,b),(c=this.minimalMonotonic(a,c))>a&&c<b},a}();c.Cyclical=g;c.cyclical2PI=l(new g(0,2*Math.PI));c.cyclicalPI=l(new g(-Math.PI,Math.PI));c.cyclicalDeg=l(new g(0,360));var t=f.vec3d.create(),m=f.vec3d.create(),n=f.vec3d.create()});