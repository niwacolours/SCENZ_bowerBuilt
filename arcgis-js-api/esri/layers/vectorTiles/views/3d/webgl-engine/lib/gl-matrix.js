//>>built
define([],function(){var N={};return function(B,z){z(B,!0);z(B,!1)}(N,function(B,z){var O={};!function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);O.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var d=a[0];return d*(1.5-.5*c*d*d)}}else O.invsqrt=function(a){return 1/Math.sqrt(a)}}();var v=Array;"undefined"!=typeof Float32Array&&(v=z?Float32Array:Array);var t={create:function(a){var b=new v(3);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=
b[2]=0,b},createFrom:function(a,b,c){var d=new v(3);return d[0]=a,d[1]=b,d[2]=c,d},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},set3:function(a,b,c,d){return d[0]=a,d[1]=b,d[2]=c,d},add:function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a)},subtract:function(a,b,c){return c&&a!==c?(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c):(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a)},multiply:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b[0],
c[1]=a[1]*b[1],c[2]=a[2]*b[2],c):(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a)},max:function(a,b,c){return c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c},min:function(a,b,c){return c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},scale:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a)},normalize:function(a,b){b||(b=a);var c=a[0],
d=a[1];a=a[2];var e=Math.sqrt(c*c+d*d+a*a);return e?1===e?(b[0]=c,b[1]=d,b[2]=a,b):(e=1/e,b[0]=c*e,b[1]=d*e,b[2]=a*e,b):(b[0]=0,b[1]=0,b[2]=0,b)},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];return c[0]=e*b-a*g,c[1]=a*f-d*b,c[2]=d*g-e*f,c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||
(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];return(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}},P=null,A=new v(4);t.unproject=function(a,b,c,d,e){e||(e=a);P||(P=y.create());
var f=P;return A[0]=2*(a[0]-d[0])/d[2]-1,A[1]=2*(a[1]-d[1])/d[3]-1,A[2]=2*a[2]-1,A[3]=1,y.multiply(c,b,f),y.inverse(f)?(y.multiplyVec4(f,A),0===A[3]?null:(e[0]=A[0]/A[3],e[1]=A[1]/A[3],e[2]=A[2]/A[3],e)):null};var N=t.createFrom(1,0,0),T=t.createFrom(0,1,0),U=t.createFrom(0,0,1);t.rotationTo=function(a,b,c){c||(c=n.create());var d=t.dot(a,b),e=t.create();if(1<=d)n.set(V,c);else if(-.999999>d)t.cross(N,a,e),1E-6>e.length&&t.cross(T,a,e),1E-6>e.length&&t.cross(U,a,e),t.normalize(e),n.fromAxisAngle(e,
Math.PI,c);else{var d=Math.sqrt(2*(1+d)),f=1/d;t.cross(a,b,e);c[0]=e[0]*f;c[1]=e[1]*f;c[2]=e[2]*f;c[3]=.5*d;n.normalize(c)}return 1<c[3]?c[3]=1:-1>c[3]&&(c[3]=-1),c};var Q=t.create(),R=t.create();t.project=function(a,b,c,d){d||(d=a);t.direction(b,c,Q);t.subtract(a,b,R);a=t.dot(Q,R);t.scale(Q,a,d);t.add(d,b,d)};t.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var E={create:function(a){var b=new v(9);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],
b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0,b},createFrom:function(a,b,c,d,e,f,g,h,k){var l=new v(9);return l[0]=a,l[1]=b,l[2]=c,l[3]=d,l[4]=e,l[5]=f,l[6]=g,l[7]=h,l[8]=k,l},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g*c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},inverse:function(a,b){var c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var p=a*h-k*m,x=-a*g+k*l,q=m*g-h*l,w=d*p+e*x+f*q;return w?(c=1/w,b||(b=E.create()),b[0]=p*c,b[1]=(-a*
e+f*m)*c,b[2]=(k*e-f*h)*c,b[3]=x*c,b[4]=(a*d-f*l)*c,b[5]=(-k*d+f*g)*c,b[6]=q*c,b[7]=(-m*d+e*l)*c,b[8]=(h*d-e*g)*c,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var p=b[0],x=b[1],q=b[2],w=b[3],u=b[4],r=b[5],n=b[6],t=b[7];b=b[8];return c[0]=p*d+x*g+q*l,c[1]=p*e+x*h+q*m,c[2]=p*f+x*k+q*a,c[3]=w*d+u*g+r*l,c[4]=w*e+u*h+r*m,c[5]=w*f+u*k+r*a,c[6]=n*d+t*g+b*l,c[7]=n*e+t*h+b*m,c[8]=n*f+t*k+b*a,c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];
b=b[1];return c[0]=d*a[0]+b*a[3]+a[6],c[1]=d*a[1]+b*a[4]+a[7],c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];return c[0]=d*a[0]+e*a[3]+b*a[6],c[1]=d*a[1]+e*a[4]+b*a[7],c[2]=d*a[2]+e*a[5]+b*a[8],c},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},identity:function(a){return a||(a=E.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],
d=a[5];return a[1]=a[3],a[2]=a[6],a[3]=b,a[5]=a[7],a[6]=c,a[7]=d,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},toMat4:function(a,b){return b||(b=y.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},y={create:function(a){var b=
new v(16);return 4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],
b[15]=a[15]),b},createFrom:function(a,b,c,d,e,f,g,h,k,l,m,p,x,q,w,u){var r=new v(16);return r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=e,r[5]=f,r[6]=g,r[7]=h,r[8]=k,r[9]=l,r[10]=m,r[11]=p,r[12]=x,r[13]=q,r[14]=w,r[15]=u,r},createFromMatrixRowMajor:function(a){var b=new v(16);return b[0]=a[0],b[4]=a[1],b[8]=a[2],b[12]=a[3],b[1]=a[4],b[5]=a[5],b[9]=a[6],b[13]=a[7],b[2]=a[8],b[6]=a[9],b[10]=a[10],b[14]=a[11],b[3]=a[12],b[7]=a[13],b[11]=a[14],b[15]=a[15],b},createFromMatrix:function(a){var b=new v(16);return b[0]=
a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},setRowMajor:function(a,b){return b[0]=a[0],b[4]=a[1],b[8]=a[2],b[12]=a[3],b[1]=a[4],b[5]=a[5],b[9]=a[6],b[13]=a[7],b[2]=a[8],b[6]=a[9],
b[10]=a[10],b[14]=a[11],b[3]=a[12],b[7]=a[13],b[11]=a[14],b[15]=a[15],b},identity:function(a){return a||(a=y.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[3],e=a[6],f=a[7],g=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=b,a[6]=a[9],a[7]=a[13],a[8]=c,a[9]=e,a[11]=a[14],a[12]=d,a[13]=f,a[14]=g,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],
b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=a[9],p=a[10],x=a[11],q=a[12],w=a[13],u=a[14];a=a[15];return q*m*h*e-l*w*h*e-q*g*p*e+f*w*p*e+l*g*u*e-f*m*u*e-q*m*d*k+l*w*d*k+q*c*p*k-b*w*p*k-l*c*u*k+b*m*u*k+q*g*d*x-f*w*d*x-q*c*h*x+b*w*h*x+f*c*u*x-b*g*u*x-l*g*d*a+f*m*d*a+l*c*h*a-b*m*h*a-f*c*p*a+b*g*p*a},inverse:function(a,b){b||(b=a);
var c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],p=a[8],x=a[9],q=a[10],w=a[11],u=a[12],r=a[13],n=a[14];a=a[15];var t=d*k-e*h,K=d*l-f*h,v=d*m-g*h,L=e*l-f*k,M=e*m-g*k,F=f*m-g*l,G=p*r-x*u,H=p*n-q*u,I=p*a-w*u,J=x*n-q*r,C=x*a-w*r,D=q*a-w*n,y=t*D-K*C+v*J+L*I-M*H+F*G;return y?(c=1/y,b[0]=(k*D-l*C+m*J)*c,b[1]=(-e*D+f*C-g*J)*c,b[2]=(r*F-n*M+a*L)*c,b[3]=(-x*F+q*M-w*L)*c,b[4]=(-h*D+l*I-m*H)*c,b[5]=(d*D-f*I+g*H)*c,b[6]=(-u*F+n*v-a*K)*c,b[7]=(p*F-q*v+w*K)*c,b[8]=(h*C-k*I+m*G)*c,b[9]=(-d*C+e*I-g*G)*
c,b[10]=(u*M-r*v+a*t)*c,b[11]=(-p*M+x*v-w*t)*c,b[12]=(-h*J+k*H-l*G)*c,b[13]=(d*J-e*H+f*G)*c,b[14]=(-u*L+r*K-n*t)*c,b[15]=(p*L-x*K+q*t)*c,b):null},toRotationMat:function(a,b){return b||(b=y.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},toMat3:function(a,b){return b||(b=E.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},toInverseMat3:function(a,
b){var c,d=a[0],e=a[1],f=a[2],g=a[4],h=a[5],k=a[6],l=a[8],m=a[9];a=a[10];var p=a*h-k*m,x=-a*g+k*l,q=m*g-h*l,w=d*p+e*x+f*q;return w?(c=1/w,b||(b=E.create()),b[0]=p*c,b[1]=(-a*e+f*m)*c,b[2]=(k*e-f*h)*c,b[3]=x*c,b[4]=(a*d-f*l)*c,b[5]=(-k*d+f*g)*c,b[6]=q*c,b[7]=(-m*d+e*l)*c,b[8]=(h*d-e*g)*c,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],p=a[8],x=a[9],q=a[10],w=a[11],n=a[12],r=a[13],t=a[14];a=a[15];var v=b[0],K=b[1],y=b[2],L=b[3],M=b[4],F=b[5],G=
b[6],H=b[7],I=b[8],J=b[9],C=b[10],D=b[11],z=b[12],A=b[13],B=b[14];b=b[15];return c[0]=v*d+K*h+y*p+L*n,c[1]=v*e+K*k+y*x+L*r,c[2]=v*f+K*l+y*q+L*t,c[3]=v*g+K*m+y*w+L*a,c[4]=M*d+F*h+G*p+H*n,c[5]=M*e+F*k+G*x+H*r,c[6]=M*f+F*l+G*q+H*t,c[7]=M*g+F*m+G*w+H*a,c[8]=I*d+J*h+C*p+D*n,c[9]=I*e+J*k+C*x+D*r,c[10]=I*f+J*l+C*q+D*t,c[11]=I*g+J*m+C*w+D*a,c[12]=z*d+A*h+B*p+b*n,c[13]=z*e+A*k+B*x+b*r,c[14]=z*f+A*l+B*q+b*t,c[15]=z*g+A*m+B*w+b*a,c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];return c[0]=
a[0]*d+a[4]*e+a[8]*b+a[12],c[1]=a[1]*d+a[5]*e+a[9]*b+a[13],c[2]=a[2]*d+a[6]*e+a[10]*b+a[14],c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=b[3];return c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b,c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b,c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b,c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b,c},translate:function(a,b,c){var d,e,f,g,h,k,l,m,p,x,q,n,u=b[0],r=b[1];b=b[2];return c&&a!==c?(d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],p=a[8],x=a[9],q=a[10],n=a[11],c[0]=d,c[1]=
e,c[2]=f,c[3]=g,c[4]=h,c[5]=k,c[6]=l,c[7]=m,c[8]=p,c[9]=x,c[10]=q,c[11]=n,c[12]=d*u+h*r+p*b+a[12],c[13]=e*u+k*r+x*b+a[13],c[14]=f*u+l*r+q*b+a[14],c[15]=g*u+m*r+n*b+a[15],c):(a[12]=a[0]*u+a[4]*r+a[8]*b+a[12],a[13]=a[1]*u+a[5]*r+a[9]*b+a[13],a[14]=a[2]*u+a[6]*r+a[10]*b+a[14],a[15]=a[3]*u+a[7]*r+a[11]*b+a[15],a)},scale:function(a,b,c){var d=b[0],e=b[1];b=b[2];return c&&a!==c?(c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*e,c[5]=a[5]*e,c[6]=a[6]*e,c[7]=a[7]*e,c[8]=a[8]*b,c[9]=a[9]*b,c[10]=
a[10]*b,c[11]=a[11]*b,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c):(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a)},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var e,f,g,h,k,l,m,p,n,q,w,u,r,t,v,y,z,A,B,F,G,H,I,J,C=c[0],D=c[1];c=c[2];var E=Math.sqrt(C*C+D*D+c*c);return E?(1!==E&&(E=1/E,
C*=E,D*=E,c*=E),e=Math.sin(b),f=Math.cos(b),g=1-f,h=a[0],k=a[1],l=a[2],m=a[3],p=a[4],n=a[5],q=a[6],w=a[7],u=a[8],r=a[9],t=a[10],v=a[11],y=C*C*g+f,z=D*C*g+c*e,A=c*C*g-D*e,B=C*D*g-c*e,F=D*D*g+f,G=c*D*g+C*e,H=C*c*g+D*e,I=D*c*g-C*e,J=c*c*g+f,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=h*y+p*z+u*A,d[1]=k*y+n*z+r*A,d[2]=l*y+q*z+t*A,d[3]=m*y+w*z+v*A,d[4]=h*B+p*F+u*G,d[5]=k*B+n*F+r*G,d[6]=l*B+q*F+t*G,d[7]=m*B+w*F+v*G,d[8]=h*H+p*I+u*J,d[9]=k*H+n*I+r*J,d[10]=l*H+q*I+t*J,d[11]=m*H+w*
I+v*J,d):null},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],f=a[5],g=a[6],h=a[7],k=a[8],l=a[9],m=a[10],p=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=e*b+k*d,c[5]=f*b+l*d,c[6]=g*b+m*d,c[7]=h*b+p*d,c[8]=e*-d+k*b,c[9]=f*-d+l*b,c[10]=g*-d+m*b,c[11]=h*-d+p*b,c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],k=a[8],l=a[9],m=a[10],p=a[11];return c?a!==c&&(c[4]=a[4],
c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+k*-d,c[1]=f*b+l*-d,c[2]=g*b+m*-d,c[3]=h*b+p*-d,c[8]=e*d+k*b,c[9]=f*d+l*b,c[10]=g*d+m*b,c[11]=h*d+p*b,c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],k=a[4],l=a[5],m=a[6],p=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+k*d,c[1]=f*b+l*d,c[2]=g*b+m*d,c[3]=h*b+p*d,c[4]=e*-d+k*b,c[5]=f*-d+
l*b,c[6]=g*-d+m*b,c[7]=h*-d+p*b,c},frustum:function(a,b,c,d,e,f,g){g||(g=y.create());var h=b-a,k=d-c,l=f-e;return g[0]=2*e/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*e/k,g[6]=0,g[7]=0,g[8]=(b+a)/h,g[9]=(d+c)/k,g[10]=-(f+e)/l,g[11]=-1,g[12]=0,g[13]=0,g[14]=-f*e*2/l,g[15]=0,g},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return y.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,f,g){g||(g=y.create());var h=b-a,k=d-c,l=f-e;return g[0]=2/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2/k,g[6]=0,g[7]=
0,g[8]=0,g[9]=0,g[10]=-2/l,g[11]=0,g[12]=-(a+b)/h,g[13]=-(d+c)/k,g[14]=-(f+e)/l,g[15]=1,g},lookAt:function(a,b,c,d){d||(d=y.create());var e,f,g,h,k,l,m,p,n,q,t=a[0],u=a[1];a=a[2];var r=c[0],v=c[1];c=c[2];var z=b[0],A=b[1];b=b[2];return t===z&&u===A&&a===b?y.identity(d):(m=t-z,p=u-A,n=a-b,q=1/Math.sqrt(m*m+p*p+n*n),m*=q,p*=q,n*=q,e=v*n-c*p,f=c*m-r*n,g=r*p-v*m,q=Math.sqrt(e*e+f*f+g*g),q?(q=1/q,e*=q,f*=q,g*=q):(e=0,f=0,g=0),h=p*g-n*f,k=n*e-m*g,l=m*f-p*e,q=Math.sqrt(h*h+k*k+l*l),q?(q=1/q,h*=q,k*=q,l*=
q):(h=0,k=0,l=0),d[0]=e,d[1]=h,d[2]=m,d[3]=0,d[4]=f,d[5]=k,d[6]=p,d[7]=0,d[8]=g,d[9]=l,d[10]=n,d[11]=0,d[12]=-(e*t+f*u+g*a),d[13]=-(h*t+k*u+l*a),d[14]=-(m*t+p*u+n*a),d[15]=1,d)},fromRotationTranslation:function(a,b,c){c||(c=y.create());var d=a[0],e=a[1],f=a[2],g=a[3],h=d+d,k=e+e,l=f+f;a=d*h;var m=d*k,d=d*l,n=e*k,e=e*l,f=f*l,h=g*h,k=g*k,g=g*l;return c[0]=1-(n+f),c[1]=m+g,c[2]=d-k,c[3]=0,c[4]=m-g,c[5]=1-(a+f),c[6]=e+h,c[7]=0,c[8]=d+k,c[9]=e-h,c[10]=1-(a+n),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=
1,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},n={create:function(a){var b=new v(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},createFrom:function(a,b,c,d){var e=new v(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||(a=n.create()),
a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}},V=n.identity();n.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];return b&&a!==b?(b[0]=c,b[1]=d,b[2]=e,b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),b):(a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a)};n.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};n.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],c=(c=c*c+d*d+e*e+f*f)?1/c:0;return b&&a!==b?(b[0]=-a[0]*c,b[1]=-a[1]*c,b[2]=-a[2]*c,b[3]=a[3]*c,b):(a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a)};n.conjugate=
function(a,b){return b&&a!==b?(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b):(a[0]*=-1,a[1]*=-1,a[2]*=-1,a)};n.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};n.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var f=Math.sqrt(c*c+d*d+e*e+a*a);return 0===f?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(f=1/f,b[0]=c*f,b[1]=d*f,b[2]=e*f,b[3]=a*f,b)};n.add=function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c):(a[0]+=b[0],
a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a)};n.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],k=b[2];b=b[3];return c[0]=d*b+a*g+e*k-f*h,c[1]=e*b+a*h+f*g-d*k,c[2]=f*b+a*k+d*h-e*g,c[3]=a*b-d*g-e*h-f*k,c};n.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=a[0];var g=a[1],h=a[2];a=a[3];var k=a*d+g*f-h*e,l=a*e+h*d-b*f,m=a*f+b*e-g*d,d=-b*d-g*e-h*f;return c[0]=k*a+d*-b+l*-h-m*-g,c[1]=l*a+d*-g+m*-b-k*-h,c[2]=m*a+d*-h+k*-g-l*-b,c};n.scale=function(a,b,c){return c&&
a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a)};n.toMat3=function(a,b){b||(b=E.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,m=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return b[0]=1-(m+e),b[1]=l+f,b[2]=c-h,b[3]=l-f,b[4]=1-(a+e),b[5]=d+g,b[6]=c+h,b[7]=d-g,b[8]=1-(a+m),b};n.toMat4=function(a,b){b||(b=y.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,m=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return b[0]=
1-(m+e),b[1]=l+f,b[2]=c-h,b[3]=0,b[4]=l-f,b[5]=1-(a+e),b[6]=d+g,b[7]=0,b[8]=c+h,b[9]=d-g,b[10]=1-(a+m),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};n.slerp=function(a,b,c,d){d||(d=a);var e,f,g,h,k=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];return 1<=Math.abs(k)?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d):(e=Math.acos(k),f=Math.sqrt(1-k*k),.001>Math.abs(f)?(d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d):(g=Math.sin((1-c)*e)/f,h=Math.sin(c*e)/f,d[0]=a[0]*
g+b[0]*h,d[1]=a[1]*g+b[1]*h,d[2]=a[2]*g+b[2]*h,d[3]=a[3]*g+b[3]*h,d))};n.fromRotationMatrix=function(a,b){b||(b=n.create());var c,d=a[0]+a[4]+a[8];if(0<d)c=Math.sqrt(d+1),b[3]=.5*c,c=.5/c,b[0]=(a[7]-a[5])*c,b[1]=(a[2]-a[6])*c,b[2]=(a[3]-a[1])*c;else{c=n.fromRotationMatrix.s_iNext=n.fromRotationMatrix.s_iNext||[1,2,0];d=0;a[4]>a[0]&&(d=1);a[8]>a[3*d+d]&&(d=2);var e=c[d],f=c[e];c=Math.sqrt(a[3*d+d]-a[3*e+e]-a[3*f+f]+1);b[d]=.5*c;c=.5/c;b[3]=(a[3*f+e]-a[3*e+f])*c;b[e]=(a[3*e+d]+a[3*d+e])*c;b[f]=(a[3*
f+d]+a[3*d+f])*c}return b};E.toQuat4=n.fromRotationMatrix;(function(){var a=E.create();n.fromAxes=function(b,c,d,e){return a[0]=c[0],a[3]=c[1],a[6]=c[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=b[0],a[5]=b[1],a[8]=b[2],n.fromRotationMatrix(a,e)}})();n.identity=function(a){return a||(a=n.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};n.fromAngleAxis=function(a,b,c){c||(c=n.create());a*=.5;var d=Math.sin(a);return c[3]=Math.cos(a),c[0]=d*b[0],c[1]=d*b[1],c[2]=d*b[2],c};n.toAngleAxis=function(a,b){b||(b=a);var c=
a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=O.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};n.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var S={create:function(a){var b=new v(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},createFrom:function(a,b,c,d){var e=new v(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||
(a=S.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,b){return b&&a!==b?(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3],b):(b=a[1],a[1]=a[2],a[2]=b,a)},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var f=c*a-e*d;return f?(f=1/f,b[0]=a*f,b[1]=-d*f,b[2]=-e*f,b[3]=c*f,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];return c[0]=d*b[0]+e*b[2],c[1]=d*b[1]+e*b[3],c[2]=f*b[0]+a*b[2],c[3]=f*b[1]+a*b[3],c},
rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);return c[0]=d*b+e*g,c[1]=d*-g+e*b,c[2]=f*b+a*g,c[3]=f*-g+a*b,c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];return c[0]=d*a[0]+b*a[1],c[1]=d*a[2]+b*a[3],c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],f=a[3],g=b[0];b=b[1];return c[0]=a[0]*g,c[1]=d*b,c[2]=e*g,c[3]=f*b,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};z=z?"":"d";B["glMath"+z]=O;B["vec2"+z]={create:function(a){var b=
new v(2);return a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0),b},createFrom:function(a,b){var c=new v(2);return c[0]=a,c[1]=b,c},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c},dist:function(a,b){var c=
b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){return b[0]=a[0],b[1]=a[1],b},set2:function(a,b,c){return c[0]=a,c[1]=b,c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];return 0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0,b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];return c?(c[0]=c[1]=0,c[2]=a,c):a},length:function(a){var b=a[0];
a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];return(b=d*d+a*a)?(b=1/Math.sqrt(b),c[0]=d*b,c[1]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};B["vec3"+z]=t;B["vec4"+z]={create:function(a){var b=new v(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=
0),b},createFrom:function(a,b,c,d){var e=new v(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c[3]=a[3]*b[3],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c[3]=a[3]/b[3],c},scale:function(a,
b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},set4:function(a,b,c,d,e){return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d[3]=a[3]+c*(b[3]-a[3]),d},str:function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};B["mat2"+z]=S;B["mat3"+z]=E;B["mat4"+z]=y;B["quat4"+z]=n}),N});