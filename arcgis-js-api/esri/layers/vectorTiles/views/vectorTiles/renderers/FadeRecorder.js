//>>built
define(["require","exports","../../../core/now"],function(g,h,k){Object.defineProperty(h,"__esModule",{value:!0});g=function(){return function(f,b,d,c){this.fadeSpeed=f;this.minfadeLevel=b;this.maxfadeLevel=d;this.fadeChange=c}}();h.FadeProperties=g;g=function(){function f(b){void 0===b&&(b=300);this._levelSnapshots=[];this._duration=b}return f.prototype.recordLevel=function(b){var d=k(),c=this._levelSnapshots;0===c.length&&(c.push({level:b,now:0}),c.push({level:b,now:0}));2!==c.length&&c[0].level===
b||c.push({level:b,now:d})},f.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var b=this._duration,d=this._levelSnapshots,c=d.length,a=d[c-1],e=-1;c>e+1&&d[e+1].now+b<a.now;)e++;for(0>e&&(e=0);e<c;e++)if(d[e].level!==a.level)return!0;return!1},f.prototype.getFadeValues=function(b){void 0===b&&(b=!1);for(var d=this._duration,c=k(),a=this._levelSnapshots;3<a.length&&a[1].now+d<c;)a.shift();a[1].now+d<c&&(a[0].level=a[1].level);var e=a[0].level,f=a[a.length-1],g=f.level,
h=Math.min(e,g),e=Math.max(e,g),a=(f.level-a[1].level)/((f.now-a[1].now)/d),d=(c-f.now)/d*a;return b?{fadeSpeed:0,minfadeLevel:h,maxfadeLevel:e,fadeChange:0}:{fadeSpeed:a,minfadeLevel:h,maxfadeLevel:e,fadeChange:d}},f}();h.FadeRecorder=g});