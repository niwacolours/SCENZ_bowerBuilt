//>>built
define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../kernel ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(t,u,v,w,p,l,q,m,r){return function(){function f(a,g){this.baseURL=a;this.devicePixelRatio=g;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}return Object.defineProperty(f.prototype,"spriteNames",{get:function(){var a=[],g;for(g in this._spritesData)a.push(g);
return a.sort(),a},enumerable:!0,configurable:!0}),f.prototype.getSpriteInfo=function(a){return this._spritesData[a]},f.prototype.load=function(){var a=this;return this.loadStatus="loading",this.baseURL?this._loadSprites().then(function(){return a.loadStatus="loaded",a}).catch(function(g){return a.loadStatus="failed",a}):m.resolve(this)},f.prototype._loadSprites=function(){var a=this;this._isRetina=1.15<this.devicePixelRatio;var g=this.baseURL,f=this._isRetina?"@2x":"";return q(g+f+".json",{callbackParamName:"callback",
responseType:"json"}).then(function(k){var h=Object.keys(k.data);if(!h||0===h.length||1===h.length&&"_ssl"===h[0])return m.resolve(null);a._spritesData=k.data;var n=new p,b=new Image;b.crossOrigin="anonymous";b.onload=function(){b.onload=null;a.width=b.width;a.height=b.height;var c=document.createElement("canvas");c.width=b.width;c.height=b.height;c=c.getContext("2d");c.drawImage(b,0,0,b.width,b.height);for(var c=c.getImageData(0,0,b.width,b.height),d=new Uint8Array(c.data),e=0;e<d.length;e+=4)c=
d[e+3]/255,d[e]*=c,d[e+1]*=c,d[e+2]*=c;a.image=d;n.resolve()};k=""+g+f+".png";l.id&&(h=l.id.findCredential(k))&&h.token&&(k+="?token\x3d"+h.token);return b.src=r.addProxy(k),n})},f}()});