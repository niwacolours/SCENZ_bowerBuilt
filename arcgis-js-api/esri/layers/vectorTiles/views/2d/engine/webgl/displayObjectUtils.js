//>>built
define("require exports ../../../../core/tsSupport/assignHelper ./enums ./enums ./MaterialInfoUtils ./mesh ./textMeshUtils ./Utils ./visualVariablesUtils ./WGLDisplayObject ./WGLDisplayRecord".split(" "),function(E,t,F,k,h,z,A,B,l,v,C,D){function w(g,l){if(!g)return k.WGLVVFlag.NONE;for(var m=0,h=0;h<g.length;h++){var n=g[h];"size"===n.type&&"outline"!==n.target?m|=v.getTypeOfSizeVisualVariable(n):"color"===n.type?m|=k.WGLVVFlag.COLOR:"opacity"===n.type?m|=k.WGLVVFlag.OPACITY:l&&"rotation"===n.type&&
(m|=k.WGLVVFlag.ROTATION)}return m}Object.defineProperty(t,"__esModule",{value:!0});var g=[];t.getDisplayObject=function(u,r,m,x,n,t,p){r=u.attributes[r];var y=new C(r),d;g.length=0;d=m.renderer;var f=m.getSymbol(u);if(f){var a=l.isMarkerSymbol(f)||l.isTextSymbol(f);if("esriGeometryPoint"===x||"esriGeometryPolyline"===x)d=(g.push({symbol:f,vv:w(d.visualVariables,a)}),g);else{if(a){if(d.backgroundFillSymbol){var a=d.backgroundFillSymbol,e=k.WGLVVFlag.NONE;if(d.visualVariables)for(var b=0,q=d.visualVariables;b<
q.length;b++){var c=q[b],c=c.type;"color"===c?e|=k.WGLVVFlag.COLOR:"opacity"===c&&(e|=k.WGLVVFlag.OPACITY)}if(g.push({symbol:a,vv:e,isBFS:!0}),a.outline&&"none"!==a.outline.style){e=k.WGLVVFlag.NONE;if(d.visualVariables)for(b=0,q=d.visualVariables;b<q.length;b++)if(c=q[b],"size"===c.type&&"outline"===c.target){e|=v.getTypeOfSizeVisualVariable(c);break}g.push({symbol:a.outline,vv:e})}}g.push({symbol:f,vv:w(d.visualVariables,!0)})}else if(l.isFillSymbol(f)){c=k.WGLVVFlag.NONE;if(d.visualVariables)for(e=
0,b=d.visualVariables;e<b.length;e++)a=b[e],a=a.type,"color"===a?c|=k.WGLVVFlag.COLOR:"opacity"===a&&(c|=k.WGLVVFlag.OPACITY);if(g.push({symbol:f,vv:c}),f.outline&&"none"!==f.outline.style){c=k.WGLVVFlag.NONE;if(d.visualVariables)for(e=0,d=d.visualVariables;e<d.length;e++)if(a=d[e],"size"===a.type&&"outline"===a.target){c|=v.getTypeOfSizeVisualVariable(a);break}g.push({symbol:f.outline,vv:c})}}else l.isLineSymbol(f)&&g.push({symbol:f,vv:w(d.visualVariables,a)});d=g}}else d=g;for(f=0;f<d.length;f++){c=
d[f];e=c.symbol;a=l.getSymbolGeometryType(e);b=0!==c.vv;switch(a){case h.WGLGeometryType.MARKER:p.icon||(p.icon=l.getStrides(h.WGLGeometryType.MARKER,b,!1));break;case h.WGLGeometryType.LINE:p.line||(p.line=l.getStrides(h.WGLGeometryType.LINE,b));break;case h.WGLGeometryType.FILL:p.fill||(p.fill=l.getStrides(h.WGLGeometryType.FILL,b));break;case h.WGLGeometryType.TEXT:p.text||(p.text=l.getStrides(h.WGLGeometryType.TEXT,b))}if(a===h.WGLGeometryType.TEXT)for(b=0,a=B.createTextDisplayRecords(u,c,r,m,
t,l.getTextProperties(e),a);b<a.length;b++)y.displayRecords.push(a[b]);else if(q=t.get(e),b=z.createMaterialInfo(q,a,c.vv),b.materialKeyInfo.hasVV(),c=A.createMesh(r,m,b.materialKeyInfo,q,a,x,n,u,e,c.isBFS))a=new D(r,a,b),a.meshData=c,y.displayRecords.push(a)}return y}});