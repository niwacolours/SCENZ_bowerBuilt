//>>built
define([],function(){function x(a,b,d){d=d||2;v=a.length/d+(b?2*b.length:0);y=!1;var c=b&&b.length,f=c?b[0]*d:a.length,k=I(a,0,f,d,!0),l=[];if(!k)return l;var g,h,t,e;if(c)a:{var m=d,n,p,q;e=[];c=0;for(n=b.length;c<n;c++)p=b[c]*m,q=c<n-1?b[c+1]*m:a.length,p=I(a,p,q,m,!1),p===p.next&&(p.steiner=!0),e.push(M(p));e.sort(N);for(c=0;c<e.length;c++){if(!k){k=null;break a}b=e[c];m=k;if(m=O(b,m))b=J(m,b),z(b,b.next);k=z(k,k.next)}}if(y)return l;if(a.length>80*d){g=t=a[0];h=c=a[1];for(m=d;m<f;m+=d)e=a[m],
b=a[m+1],e<g&&(g=e),b<h&&(h=b),e>t&&(t=e),b>c&&(c=b);t=Math.max(t-g,c-h)}return A(k,l,d,g,h,t),l}function I(a,b,d,c,f){var k;if(f===0<B(a,b,d,c))for(f=b;f<d;f+=c)k=K(f,a[f],a[f+1],k);else for(f=d-c;f>=b;f-=c)k=K(f,a[f],a[f+1],k);return k&&w(k,k.next)&&(C(k),k=k.next),k}function z(a,b){if(!a)return a;b||(b=a);var d=a,c=0,f=v*v/2;do{if(a=!1,d.steiner||!w(d,d.next)&&0!==u(d.prev,d,d.next))d=d.next;else{if(C(d),(d=b=d.prev)===d.next)return null;a=!0}if(c++>f)return y=!0,null}while(a||d!==b);return b}
function A(a,b,d,c,f,k,l){if(a){if(!l&&k){var g=a,h=g;do null===h.z&&(h.z=G(h.x,h.y,c,f,k)),h.prevZ=h.prev,h=h.nextZ=h.next;while(h!==g);h.prevZ.nextZ=null;h.prevZ=null;var g=h,t,e,m,n,p,q,D=1;do{h=g;n=g=null;for(p=0;h;){p++;e=h;for(t=q=0;t<D&&(q++,e=e.nextZ);t++);for(t=D;0<q||0<t&&e;)0===q?(m=e,e=e.nextZ,t--):0!==t&&e?h.z<=e.z?(m=h,h=h.nextZ,q--):(m=e,e=e.nextZ,t--):(m=h,h=h.nextZ,q--),n?n.nextZ=m:g=m,m.prevZ=n,n=m;h=e}n.nextZ=null;D*=2}while(1<p)}for(h=a;a.prev!==a.next;){m=a.prev;g=a.next;if(k)a:{e=
a;t=c;var r=f,v=k;n=e.prev;p=e;q=e.next;if(0<=u(n,p,q))e=!1;else{var x=n.x>p.x?n.x>q.x?n.x:q.x:p.x>q.x?p.x:q.x,B=n.y>p.y?n.y>q.y?n.y:q.y:p.y>q.y?p.y:q.y,D=G(n.x<p.x?n.x<q.x?n.x:q.x:p.x<q.x?p.x:q.x,n.y<p.y?n.y<q.y?n.y:q.y:p.y<q.y?p.y:q.y,t,r,v);t=G(x,B,t,r,v);for(r=e.nextZ;r&&r.z<=t;){if(r!==e.prev&&r!==e.next&&F(n.x,n.y,p.x,p.y,q.x,q.y,r.x,r.y)&&0<=u(r.prev,r,r.next)){e=!1;break a}r=r.nextZ}for(r=e.prevZ;r&&r.z>=D;){if(r!==e.prev&&r!==e.next&&F(n.x,n.y,p.x,p.y,q.x,q.y,r.x,r.y)&&0<=u(r.prev,r,r.next)){e=
!1;break a}r=r.prevZ}e=!0}}else e=P(a);if(e)b.push(m.i/d),b.push(a.i/d),b.push(g.i/d),C(a),h=a=g.next;else{if(y)break;if((a=g)===h){if(l)if(1===l){l=b;m=d;g=a;do h=g.prev,e=g.next.next,!w(h,e)&&L(h,g,g.next,e)&&E(h,e)&&E(e,h)&&(l.push(h.i/m),l.push(g.i/m),l.push(e.i/m),C(g),C(g.next),g=a=e),g=g.next;while(g!==a);a=g;A(a,b,d,c,f,k,2)}else{if(2===l)a:{l=a;do{for(m=l.next.next;m!==l.prev;){if(g=l.i!==m.i){g=l;h=m;e=void 0;if(e=g.next.i!==h.i&&g.prev.i!==h.i){e=void 0;b:{e=g;do{if(e.i!==g.i&&e.next.i!==
g.i&&e.i!==h.i&&e.next.i!==h.i&&L(e,e.next,g,h)){e=!0;break b}e=e.next}while(e!==g);e=!1}e=!e}n=void 0;if(n=e&&E(g,h)&&E(h,g)){e=g;n=!1;p=(g.x+h.x)/2;h=(g.y+h.y)/2;do e.y>h!=e.next.y>h&&p<(e.next.x-e.x)*(h-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==g)}g=n}if(g){a=J(l,m);l=z(l,l.next);a=z(a,a.next);A(l,b,d,c,f,k);A(a,b,d,c,f,k);break a}m=m.next}l=l.next}while(l!==a)}}else A(z(a),b,d,c,f,k,1);break}}}}}function P(a){var b=a.prev,d=a.next;if(0<=u(b,a,d))return!1;for(var c=a.next.next,f=0;c!==
a.prev;){if(F(b.x,b.y,a.x,a.y,d.x,d.y,c.x,c.y)&&0<=u(c.prev,c,c.next))return!1;if(c=c.next,f++>v)return y=!0,!1}return!0}function N(a,b){return a.x-b.x}function O(a,b){var d,c=b,f=a.x,k=a.y,l=-1/0;do{if(!c)return null;if(k<=c.y&&k>=c.next.y){var g=c.x+(k-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=f&&g>l){if(l=g,g===f){if(k===c.y)return c;if(k===c.next.y)return c.next}d=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!d)return null;if(f===l)return d.prev;var h;b=d;for(var g=d.x,t=d.y,e=1/0,c=d.next;c!==
b;)f>=c.x&&c.x>=g&&F(k<t?f:l,k,g,t,k<t?l:f,k,c.x,c.y)&&((h=Math.abs(k-c.y)/(f-c.x))<e||h===e&&c.x>d.x)&&E(c,a)&&(d=c,e=h),c=c.next;return d}function G(a,b,d,c,f){return a=32767*(a-d)/f,b=32767*(b-c)/f,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function M(a){var b=a,d=a;do b.x<d.x&&(d=b),b=b.next;while(b!==a);return d}function F(a,b,d,c,f,k,l,g){return 0<=(f-l)*(b-g)-
(a-l)*(k-g)&&0<=(a-l)*(c-g)-(d-l)*(b-g)&&0<=(d-l)*(k-g)-(f-l)*(c-g)}function u(a,b,d){return(b.y-a.y)*(d.x-b.x)-(b.x-a.x)*(d.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function L(a,b,d,c){return!!(w(a,b)&&w(d,c)||w(a,c)&&w(d,b))||0<u(a,b,d)!=0<u(a,b,c)&&0<u(d,c,a)!=0<u(d,c,b)}function E(a,b){return 0>u(a.prev,a,a.next)?0<=u(a,b,a.next)&&0<=u(a,a.prev,b):0>u(a,b,a.prev)||0>u(a,a.next,b)}function J(a,b){var d=new H(a.i,a.x,a.y),c=new H(b.i,b.x,b.y),f=a.next,k=b.prev;return a.next=b,b.prev=a,
d.next=f,f.prev=d,c.next=d,d.prev=c,k.next=c,c.prev=k,c}function K(a,b,d,c){a=new H(a,b,d);return c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a),a}function C(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function H(a,b,d){this.i=a;this.x=b;this.y=d;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function B(a,b,d,c){for(var f=0,k=d-c;b<d;b+=c)f+=(a[k]-a[b])*(a[b+1]+a[k+1]),k=b;return f}var v,y;
return x.deviation=function(a,b,d,c){var f=b&&b.length,k=Math.abs(B(a,0,f?b[0]*d:a.length,d));if(f)for(var f=0,l=b.length;f<l;f++)k-=Math.abs(B(a,b[f]*d,f<l-1?b[f+1]*d:a.length,d));for(f=b=0;f<c.length;f+=3){var l=c[f]*d,g=c[f+1]*d,h=c[f+2]*d;b+=Math.abs((a[l]-a[h])*(a[g+1]-a[l+1])-(a[l]-a[g])*(a[h+1]-a[l+1]))}return 0===k&&0===b?0:Math.abs((b-k)/k)},x.flatten=function(a){for(var b=a[0][0].length,d={vertices:[],holes:[],dimensions:b},c=0,f=0;f<a.length;f++){for(var k=0;k<a[f].length;k++)for(var l=
0;l<b;l++)d.vertices.push(a[f][k][l]);0<f&&(c+=a[f-1].length,d.holes.push(c))}return d},x});