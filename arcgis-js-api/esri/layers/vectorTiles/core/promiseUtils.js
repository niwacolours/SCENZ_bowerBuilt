//>>built
define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(m,d,f,g,h,l){function k(a){if(a){if("function"!=typeof a.forEach){var b=Object.keys(a);return k(b.map(function(e){return a[e]})).then(function(a){var e={};return b.forEach(function(b,c){return e[b]=a[c]}),e})}var c=new f,e=[],d=a.length;return 0===d&&c.resolve(e),a.forEach(function(a){var b={promise:a};e.push(b);a.then(function(a){b.value=a}).catch(function(a){b.error=a}).then(function(){0===--d&&c.resolve(e)})}),
c.promise}}Object.defineProperty(d,"__esModule",{value:!0});d.all=function(a){return h(a)};d.filter=function(a,b){var c=a.slice();return h(a.map(function(a,c){return b(a,c)})).then(function(a){return c.filter(function(b,e){return a[e]})})};d.eachAlways=k;d.create=function(a,b){var c=new f(b);return a(function(a){return void 0===a&&(a=null),g(a).then(c.resolve)},c.reject),c.promise};d.reject=function(a){var b=new f;return b.reject(a),b.promise};d.resolve=function(a){void 0===a&&(a=null);var b=new f;
return b.resolve(a),b.promise};d.after=function(a,b){void 0===b&&(b=null);var c=0,e=new f(function(){c&&(clearTimeout(c),c=0)});return c=setTimeout(function(){e.resolve(b)},a),e.promise};d.timeout=function(a,b,c){var e=0,d=new f(a.cancel);return a.then(function(a){d.isFulfilled()||(d.resolve(a),e&&(clearTimeout(e),e=0))}),a.catch(function(a){d.isFulfilled()||(d.reject(a),e&&(clearTimeout(e),e=0))}),e=setTimeout(function(){var a=c||new l("promiseUtils:timeout","The wrapped promise did not resolve within "+
b+" ms");d.reject(a)},b),d.promise};d.wrapCallback=function(a){var b=!1,c=new f(function(){return b=!0});return a(function(a){b||c.resolve(a)}),c.promise};d.isThenable=function(a){return a&&"function"==typeof a.then};d.when=function(a){return g(a)}});