//>>built
define(["require","exports","../../../object","./type"],function(r,k,h,m){function n(a,b,e,d){h.setDeepValue(e,g(a,d),b)}function g(a,b){return a&&"function"==typeof a.write?a.write({},b):a&&"function"==typeof a.toJSON?a.toJSON():"number"==typeof a?a===-1/0?-Number.MAX_VALUE:a===1/0?Number.MAX_VALUE:isNaN(a)?null:a:a}function p(a,b,e,d){var c;null===a?c=null:a&&"function"==typeof a.map?(c=a.map(function(a){return g(a,d)}),"function"==typeof c.toArray&&(c=c.toArray())):c=[g(a,d)];h.setDeepValue(e,
c,b)}function l(a,b,e){return 0!==e&&Array.isArray(a)?a.map(function(a){return l(a,b,e-1)}):g(a,b)}function q(a){return function(b,e,d,c){if(null===b)b=null;else{b=l(b,c,a);c=a;for(var f=b;0<c&&Array.isArray(f);)c--,f=f[0];if(void 0!==f)for(f=0;f<c;f++)b=[b]}h.setDeepValue(d,b,e)}}Object.defineProperty(k,"__esModule",{value:!0});k.create=function(a,b,e,d){d.write&&!d.write.writer&&!1!==d.write.enabled&&(1===b||m.isCollection(a)?d.write.writer=p:d.write.writer=1<b?q(b):n)}});